<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
<channel>
<title><![CDATA[Alex Brown]]></title>
<description><![CDATA[Alex Brown]]></description>
<link>https://alexb7711.github.io</link>
<lastBuildDate>Tue, 01 Jun 2021 21:08:04 -0600</lastBuildDate>
<item>
  <title><![CDATA[The Modern Berth Allocation Problem]]></title>
  <description><![CDATA[
<nav id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org6bb175a">Introduction</a></li>
<li><a href="#org5e55dfd">The Berth Allocation Problem</a>
<ul>
<li><a href="#org9e6dbf1">Continuous and Discrete Representation</a></li>
<li><a href="#org73350d8">Static BAP Modeling</a>
<ul>
<li><a href="#org5e176b2">Port and Berth Information</a></li>
<li><a href="#org1d9e606">Vessel Information</a></li>
<li><a href="#org30b4bd5">Decision Variables</a></li>
<li><a href="#orga010c66">Cost Variables</a></li>
</ul>
</li>
<li><a href="#org385a1a9">Definitions</a>
<ul>
<li><a href="#orge05ba1d">TODO: Add image from Cornell paper here</a></li>
</ul>
</li>
<li><a href="#org037fbfc">Dynamic BAP Model</a></li>
</ul>
</li>
<li><a href="#org929e489">The Position Allocation Problem (PAP)</a>
<ul>
<li><a href="#org0aa69e0">Variable Matching:</a></li>
<li><a href="#org97a1d59">Decision Variable Matching</a></li>
<li><a href="#orgc6661e0">Formulation</a>
<ul>
<li><a href="#orga98946e">The Time-Space Diagram</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org71fc731">Fuzzy BAP</a>
<ul>
<li><a href="#orgbdb1ac2">Preliminaries</a>
<ul>
<li><a href="#org7a261d0">Fuzzy Sets</a></li>
<li><a href="#orgcd8e312">Triangular Fuzzy Number</a></li>
<li><a href="#orgcbc7a9d">Fuzzy Arithmetic</a></li>
<li><a href="#org610d10a">Comparison of Fuzzy Numbers</a></li>
</ul>
</li>
<li><a href="#orgfc65acb">Formulation of Fully Fuzzy Linear Programs</a></li>
<li><a href="#org9312506">FFLP Model for the Berth Allocation Problem</a></li>
</ul>
</li>
<li><a href="#orgccdb3c9">Sources</a>
<ul>
<li><a href="#org3370a81">BAP</a></li>
<li><a href="#orge96c29e">PAP</a></li>
</ul>
</li>
</ul>
</div>
</nav>

<div id="outline-container-org6bb175a" class="outline-2">
<h2 id="org6bb175a">Introduction</h2>
<div class="outline-text-2" id="text-org6bb175a">
<p>
The Berth Allocation Problem (BAP), is a long studied problem which consists of the solving for the optimal docking of vessels on a birth to be processed. There are many renditions of the problem to optimize over multiple quays, to be solved using discrete or continuous variables, to optimize over different parameters such as time of service or cost, and many more. Needless to say, it is a well studied problem. This post introduces that idea and then begins to introduce some new ideas and views that BAP may be used for.
</p>
</div>
</div>

<div id="outline-container-org5e55dfd" class="outline-2">
<h2 id="org5e55dfd">The Berth Allocation Problem</h2>
<div class="outline-text-2" id="text-org5e55dfd">
<p>
The BAP is a ship allocation problem regarding berth space for vessels in container terminals. As ships arrive, they must be allocated space and time along the berth to be served. Different factors that are taken into account are: time required to serve and size of the vessel. Solutions to BAP make attempts to optimize the space/time allocation for the vessels by
</p>

<ul class="org-ul">
<li>Minimization of service time</li>
<li>Minimization of early and delayed departures</li>
<li>Optimization of arrival times</li>
<li>Optimization of emissions and fuel consumption</li>
</ul>
</div>

<div id="outline-container-org9e6dbf1" class="outline-3">
<h3 id="org9e6dbf1">Continuous and Discrete Representation</h3>
<div class="outline-text-3" id="text-org9e6dbf1">
<p>
As with most problems, they can be represented in either a continuous or discrete fashion. Among the models
</p>

<ol class="org-ol">
<li>Discrete vs. continuous berth space</li>
<li>Static vs. dynamic vessel arrival</li>
<li>Static vs. dynamic vessel handling times</li>
<li>Variable vessel arrivals</li>
</ol>

<p>
are observed most frequently in literature. For our purposes, we will mostly be analyzing the discrete berth space with dynamic vessel arrivals.
</p>
</div>
</div>

<div id="outline-container-org73350d8" class="outline-3">
<h3 id="org73350d8">Static BAP Modeling</h3>
<div class="outline-text-3" id="text-org73350d8">
</div>
<div id="outline-container-org5e176b2" class="outline-4">
<h4 id="org5e176b2">Port and Berth Information</h4>
<div class="outline-text-4" id="text-org5e176b2">
<ul class="org-ul">
<li>\(W\): Number of wharfs</li>
<li>\(w_l\) : Length of wharf \(i \in 1,...,W\)</li>
<li>\(M\): Number of berths in the terminal</li>
<li>\(L_i\): Length of berth \(i \in 1,...,M\)</li>
</ul>
</div>
</div>

<div id="outline-container-org1d9e606" class="outline-4">
<h4 id="org1d9e606">Vessel Information</h4>
<div class="outline-text-4" id="text-org1d9e606">
<ul class="org-ul">
<li>\(N\): Number of vessels that have arrive or will arrive within the schedule window</li>
<li>\(r_i\): Arrival time of vessel \(i\)</li>
<li>\(l_i\): Length of vessel \(i\)</li>
<li>\(p_i\): Time to process vessel \(i\)</li>
</ul>
</div>
</div>

<div id="outline-container-org30b4bd5" class="outline-4">
<h4 id="org30b4bd5">Decision Variables</h4>
<div class="outline-text-4" id="text-org30b4bd5">
<ul class="org-ul">
<li>\(x_i\): Berthing location for vessel \(i\)</li>
<li>\(t_i\): Planning berthing time for vessel \(i\)</li>
</ul>
</div>
</div>

<div id="outline-container-orga010c66" class="outline-4">
<h4 id="orga010c66">Cost Variables</h4>
<div class="outline-text-4" id="text-orga010c66">
<ul class="org-ul">
<li>Location Cost
The quality of the berthing locations assigned are given by</li>
</ul>

\begin{equation}
\sum_{i=1}^{N} c_i (x_i)
\end{equation}

<p>
where \(c_i\) is a step function in \(x_i\). Another way to look at this is assume \(c_i(x_i) = d_{i,l}\) where \(d_{i,j}\) is the cost for berthing vessel \(i\) at berth \(l\). \(d_{i,l}\) can then be thought as the desirability of berthing vessel \(i\) at berth \(l\).
</p>

<ul class="org-ul">
<li>Delay Cost
The quality of the berthing times assigned is given by</li>
</ul>

\begin{equation}
\sum_{i=1}^{N} w_i(t_i-r_i-2)^+
\end{equation}

<p>
In this case, a vessel is considered berthed-on-arrival if it can be berthed within two hours of arrival (hence the \(-2\) in the cost function).
</p>

<p>
Putting it together we get
</p>

\begin{equation}
\begin{array}{cc}
\sum_{i=1}^{N} c_i(x_i) + w_i(t_i-r_i-2)^+ & \\
s.t & t_i \geq r_i \forall i \\
    & x_i + l_i \leq \sum_i L_i, x_i \geq 0 \forall i \\
    & x_i \in W \\
    & t_i + p_i \leq t_j \; \textrm{or}\; t_j + p_j \leq t_i\; \textrm{or}\; x_i + l_i \leq x_j\; \textrm{or}\; x_j + l_j \leq x_j \forall i \neq j \\
\end{array}
\end{equation}

<p>
The last constraint models that vessels \(i\) and \(j\) cannot occupy the same location in the terminal at the same time.
</p>
</div>
</div>
</div>

<div id="outline-container-org385a1a9" class="outline-3">
<h3 id="org385a1a9">Definitions</h3>
<div class="outline-text-3" id="text-org385a1a9">
<ul class="org-ul">
<li>Terminal: The facility where the vessels are docked</li>
<li>Wharf: A linear strip where the vessels are able to dock. There are typically multiple wharfs in a terminal</li>
<li>Berth: A berth is a discrete subsection of the wharf. There are typically multiple berths in a wharf.</li>
</ul>
</div>

<div id="outline-container-orge05ba1d" class="outline-4">
<h4 id="orge05ba1d">TODO: Add image from Cornell paper here</h4>
</div>
</div>

<div id="outline-container-org037fbfc" class="outline-3">
<h3 id="org037fbfc">Dynamic BAP Model</h3>
<div class="outline-text-3" id="text-org037fbfc">
<p>
The dynamic BAP model adds the additional challenge of rolling the plan forward every time step. The main problem being is how to handle the situation where a vessel \(j\) is already in the place of vessel \(i\).
</p>

<p>
An approach to this is to mark used berths as forbidden zones. The schedule is then is readjusted by placing a lower limit to the berthing location decision variable. If there is no room (meaning the vessel must wait), a lower bound can be placed on the time decision variable.
</p>
</div>
</div>
</div>

<div id="outline-container-org929e489" class="outline-2">
<h2 id="org929e489">The Position Allocation Problem (PAP)</h2>
<div class="outline-text-2" id="text-org929e489">
<p>
PAP describes the scenario where rather than vessels lined up to dock at a berth, we have electric vehicles lined up to be charged by a series of chargers. The scenario where buses are lined up to be charged is extremely analogous to the BAP problem. The significant difference is the location of the &ldquo;wharf&rdquo;. Instead of docking the vehicles parallel to the wharf, they will be lined up perpendicular to it. The following describes the conversion from the berth allocation problem to the position allocation problem.
</p>
</div>

<div id="outline-container-org0aa69e0" class="outline-3">
<h3 id="org0aa69e0">Variable Matching:</h3>
<div class="outline-text-3" id="text-org0aa69e0">
<ul class="org-ul">
<li>\(S\): Length of the berth</li>
<li>\(T\): Length of the time horizon</li>
<li>\(N\): Total number of incoming vehicles</li>
<li>\(p_i\): The charging time for vehicle \(i; \forall 1 \leq i \leq N\)</li>
<li>\(s_i\): The size of vehicle \(i; \forall 1 \leq i \leq N\)</li>
<li>\(a_i\): The arrival time of vehicle \(i; \forall 1 \leq i \leq N\)</li>
<li>\(w_i\): The weight assigned for vehicle \(i; \forall 1 \leq i \leq N\)</li>
</ul>
</div>
</div>

<div id="outline-container-org97a1d59" class="outline-3">
<h3 id="org97a1d59">Decision Variable Matching</h3>
<div class="outline-text-3" id="text-org97a1d59">
<ul class="org-ul">
<li>\(u_i\): The starting time of charging for vehicle \(i; \forall 1 \leq i \leq N\)</li>
<li>\(v_i\): The starting berth position occupied by vehicle \(i; \forall 1 \leq i \leq N\)</li>
<li>\(c_i\): The departure time of vehicle \(i; \forall 1 \leq i \leq N\)</li>
<li><p>
\(\sigma_{ij}\):
</p>
\begin{equation*}
\begin{array}{c}
  \sigma_{ij}:\; \begin{cases} 1 & \textrm{ if vehicle i is full on the left of} \\
  & \textrm{vehicle j in the } \\
  & \textrm{Time - space diagram} \\
  0 & \textrm{otherwise} \\
  \end{cases} \\
 \end{array}
 \end{equation*}</li>
<li><p>
\(\delta_{ij}\):
</p>
\begin{equation*}
\begin{array}{c}
  \delta_{ij}:\; \begin{cases} 1 & \textrm{ if vehicle i is full below} \\
  & \textrm{vehicle j in the } \\
  & \textrm{Time - space diagram} \\
  0 & \textrm{otherwise} \\
 \end{cases}\\
 \end{array}
 \end{equation*}</li>
</ul>
</div>
</div>

<div id="outline-container-orgc6661e0" class="outline-3">
<h3 id="orgc6661e0">Formulation</h3>
<div class="outline-text-3" id="text-orgc6661e0">
<p>
The cost function is of the form
</p>
\begin{equation}
min \sum_{i=1}^N w_i(c_i - a_i)
\end{equation}

<p>
Subject to the constraints
</p>

\begin{equation}
\begin{array}{cc}
u_j - u_i - p_i - (\sigma_{ij} - 1)                          & T \geq 0 \\
v_j - v_i - s_i - (\delta_{ij} - 1)                          & S \geq 0 \\
\sigma_{ij} + \sigma_{ji} + \delta_{ij} + \delta_{ji} \geq 1 & \\
\sigma_{ij} + \sigma_{ji} \leq 1                             & \\
\delta_{ij} + \delta_{ji} \leq 1                             & \\
p_i + u_i = c_i                                              & \\
a_i \leq u_i \leq (T-p_i)                                    & \\
\sigma_{ij} \in \{0,1\},\; \delta_{ij} \in \{0,1\} \\
\end{array}
\end{equation}

<p>
The first and second constraint are the definition of \(\sigma\) and \(\delta\), respectively. The fourth constraint through the sixth guarantee that vehicle \(i\) and \(j\) do not overlap in the Time-Space diagram. Constraint seven shows the relationship between the completion time \(c_i\) and the starting time \(u_i\) for vehicle \(i\). Constraints eight and nine define the feasible domains for the decision variables \(u_i\), \(v_i\), \(\sigma_{ij}\), and \(\delta_{ij}\).
</p>
</div>

<div id="outline-container-orga98946e" class="outline-4">
<h4 id="orga98946e">The Time-Space Diagram</h4>
<div class="outline-text-4" id="text-orga98946e">
<p>
The first and second constraint (\(\sigma_{ij}\) and \(\delta){ij}\)) are represented in the figure below. \(\sigma{ij}\) represents vehicle \(i\) being charged and allowing \(j\) to take its place to be charged (i.e. if the vehicle in front of me is charged \(\sigma_{ij} = 1\)). \(\delta{ij}\) represents the vehicles being lined up perpendicular to their respective charging stations (i.e. the vehicle in the charging lane to my left is done therefore \(\delta_{ij} = 1\)).
</p>

<p>
![Berth Allocation Time-Space Diagram](img/BerthTimeSpace.gif)
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-org71fc731" class="outline-2">
<h2 id="org71fc731">Fuzzy BAP</h2>
<div class="outline-text-2" id="text-org71fc731">
</div>
<div id="outline-container-orgbdb1ac2" class="outline-3">
<h3 id="orgbdb1ac2">Preliminaries</h3>
<div class="outline-text-3" id="text-orgbdb1ac2">
</div>
<div id="outline-container-org7a261d0" class="outline-4">
<h4 id="org7a261d0">Fuzzy Sets</h4>
<div class="outline-text-4" id="text-org7a261d0">
\begin{equation}
    \tilde{A} = \{ (x, \mu_{\tilde{A}}(x), x \in X) \}
\end{equation}

<p>
Where \(\mu_{\tilde{A}} : X \rightarrow [0,1]\) is called the membership function.
</p>
</div>
</div>

<div id="outline-container-orgcd8e312" class="outline-4">
<h4 id="orgcd8e312">Triangular Fuzzy Number</h4>
<div class="outline-text-4" id="text-orgcd8e312">
\begin{equation}
\tilde{a} = (a_1, a_2, a_3)
\end{equation}


<figure id="org833fb57">
<img src="./img/TriangularFuzzyNumber.png" alt="TriangularFuzzyNumber.png">

</figure>
</div>
</div>

<div id="outline-container-orgcbc7a9d" class="outline-4">
<h4 id="orgcbc7a9d">Fuzzy Arithmetic</h4>
<div class="outline-text-4" id="text-orgcbc7a9d">
<p>
If we have two fuzzy numbers \(\tilde{a}\) and \(\tilde{b}\) then the sum is taken as
</p>

\begin{equation}
\tilde{a} + \tilde{b} = (a_1 + b_1, a_2 + b_2, a_3 + b_3)
\end{equation}

<p>
And similarly is done for the difference.
</p>
</div>
</div>

<div id="outline-container-org610d10a" class="outline-4">
<h4 id="org610d10a">Comparison of Fuzzy Numbers</h4>
<div class="outline-text-4" id="text-org610d10a">
<p>
There are multiple ways of comparing fuzzy numbers, the way done in this particular text is the First Index of Yagger
</p>

\begin{equation}
\mathbb{R} = \frac{a_1 + a_2 + a_3}{3}
\end{equation}

<p>
Which results in \(\tilde{a} \leq \tilde{b}\) when \(\mathbb{R}(\tilde{a}) \leq \mathbb{R}(\tilde{b})\)
</p>
</div>
</div>
</div>


<div id="outline-container-orgfc65acb" class="outline-3">
<h3 id="orgfc65acb">Formulation of Fully Fuzzy Linear Programs</h3>
<div class="outline-text-3" id="text-orgfc65acb">
\begin{equation}
\begin{array}{cc}
\sum_{j=1}^n \tilde{c}_j \tilde{x}_j & \\
s.t. & \sum_{j=1}^n \tilde{a}_{ij} \tilde{x}_j \leq \tilde{b}_j \\
\end{array}
\end{equation}

<p>
As a consequence of the mathematics applied to fuzzy numbers, we can rewrite this problem as a standard linear problem by applying the addition rule:
</p>


<figure id="org08f01b2">
<img src="./img/FuzzyToStandardBAP.png" alt="FuzzyToStandardBAP.png">

</figure>
</div>
</div>

<div id="outline-container-org9312506" class="outline-3">
<h3 id="org9312506">FFLP Model for the Berth Allocation Problem</h3>
<div class="outline-text-3" id="text-org9312506">
<p>
Using the following definitions
</p>


<figure id="org0fa42cb">
<img src="./img/FFLPDef.png" alt="FFLPDef.png">

</figure>

<p>
the BAP can be formulated assigned
</p>


<figure id="orga54721b">
<img src="./img/FFLPFormulation.png" alt="FFLPFormulation.png">

</figure>

<p>
where the \(z\) variable is similar to the \(\sigma\) variable in the PAP problem. It indicates if the vessel \(i\) is located to the left of vessel \(j\) at the berth.
</p>

<p>
Applying the methodology from the previous section, the BAP problem can be fully modeled assigned
</p>


<figure id="orgecb4dcd">
<img src="./img/FFLPMILP.png" alt="FFLPMILP.png">

</figure>
</div>
</div>
</div>

<div id="outline-container-orgccdb3c9" class="outline-2">
<h2 id="orgccdb3c9">Sources</h2>
<div class="outline-text-2" id="text-orgccdb3c9">
</div>
<div id="outline-container-org3370a81" class="outline-3">
<h3 id="org3370a81">BAP</h3>
<div class="outline-text-3" id="text-org3370a81">
<ul class="org-ul">
<li><a href="http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.471.9196&amp;rep=rep1&amp;type=pdf">The dynamic berth allocation problem for a container port</a></li>
<li><a href="https://en.wikipedia.org/wiki/Berth_allocation_problem">Berth allocation problem</a></li>
<li><a href="https://people.orie.cornell.edu/jdai/publications/daiLinMoorthyTeo08.pdf">Berth Allocation Planning Optimization in Container Terminals</a></li>
<li><a href="https://www.comp.nus.edu.sg/~cs5234/BAP/lecture/BAP-Lecture-CS5234.pdf">Berth Allocation Problem – A Case Study in Algorithmic Approaches</a></li>
<li><a href="https://www.researchgate.net/publication/320013147_A_Fully_Fuzzy_Linear_Programming_Model_to_the_Berth_Allocation_Problem">A Fully Fuzzy Linear Programming Model to the Berth Allocation</a></li>
<li><a href="https://www.sciencedirect.com/science/article/pii/S0957417415003462">The Continuous Berth Allocation Problem In A Container Terminal With Multiple Quays</a></li>
</ul>
</div>
</div>

<div id="outline-container-orge96c29e" class="outline-3">
<h3 id="orge96c29e">PAP</h3>
<div class="outline-text-3" id="text-orge96c29e">
<ul class="org-ul">
<li><a href="https://ieeexplore.ieee.org/document/8786524">Optimized Scheduling for Solving Position Allocation Problem in Electric Vehicle Charging Stations</a></li>
</ul>
</div>
</div>
</div>
<div class="taglist"></div>]]></description>
  <link>https://alexb7711.github.io/2021-06-01-the-modern-berth-allocation-problem.html</link>
  <pubDate>Tue, 01 Jun 2021 20:52:00 -0600</pubDate>
</item>
<item>
  <title><![CDATA[Fuzzy Linear Programming]]></title>
  <description><![CDATA[
<nav id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgbd85f05">Introduction</a></li>
<li><a href="#org4890490">Triangular Fuzzy Theory</a>
<ul>
<li><a href="#orga4cd01d">Definitions</a></li>
<li><a href="#orgc22e035">Concepts</a>
<ul>
<li><a href="#orgf7f1c0b">Properties</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org8609e42">Linear Ranking Functions</a></li>
<li><a href="#orgf578827">FILP With Fuzzy Constraints</a></li>
<li><a href="#orgc12bb43">FILP With Imprecise Cost</a>
<ul>
<li><a href="#org4de0740"><span class="done DONE">DONE</span> Fuzzy Number via Linear Ranking Functions</a></li>
<li><a href="#org66675d1">Representation Theorem</a></li>
</ul>
</li>
<li><a href="#org3e30b7d">FILP With Fuzzy Numbers As Coefficients Of The Technological Matrix</a></li>
<li><a href="#org374ddb7">References</a>
<ul>
<li><a href="#org43723cb">Fuzzy Linear Programming</a></li>
<li><a href="#org11c6a49">Fuzzy Theory</a></li>
<li><a href="#orgbb9ebc8">Ranking Functions</a></li>
</ul>
</li>
</ul>
</div>
</nav>
<p>
Linear programming is a widely used method of solving for obtaining optimal solutions. They typically come in the form of some cost function \(\sum_i c_i x_i\) subject so some set of constraints. This solution method works extremely well when the problem and its constraints are well defined. Real life problems, however, are rarely well defined and are almost indefinitely left with some ambiguity or &ldquo;wiggle room&rdquo;. That is what this post is about, a way to represent linear programs with different types of fuzzy parameters.
</p>

<div id="outline-container-orgbd85f05" class="outline-2">
<h2 id="orgbd85f05">Introduction</h2>
<div class="outline-text-2" id="text-orgbd85f05">
<p>
A typical integer linear program can be represented as
</p>

\begin{equation}
    \begin{array}{ccc}
        max z = xc &  &                                                      \\
        s.t.       & \sum_{j\in N} a_{ij} x_j \leq b_i & i \in M = {1,...,m} \\
                   & x_j \geq 0 & j \in N = {1,...,n}                        \\
                   & x_j \in \mathbb{N} & j \in N                            \\
    \end{array}
\end{equation}

<p>
Where \(\mathbb{N}\) is the set of real numbers, \(c\in \mathbb{R}^n\) and \(a_{ij},\; b_i \in \mathbb{R}\), \(i \in M\), and \(j \in N\).
</p>

<p>
Real situations, like the above system assumes, is not always the case. There are some situations where the information available is not exact. The types of formulations that can address these uncertainties are known as Fuzzy Integer linear Programs (FILP).
</p>
</div>
</div>

<div id="outline-container-org4890490" class="outline-2">
<h2 id="org4890490">Triangular Fuzzy Theory</h2>
<div class="outline-text-2" id="text-org4890490">
</div>
<div id="outline-container-orga4cd01d" class="outline-3">
<h3 id="orga4cd01d">Definitions</h3>
<div class="outline-text-3" id="text-orga4cd01d">
<ul class="org-ul">
<li><b>Fuzzy Subset</b>: Let \(E\) be a set that is finite or infinite. Let \(A\) be a set contained in \(E\). The order pair \((x, \mu_{A}(x))\) defines the fuzzy subset \(A\) of \(E\), where \(x\) is an element in \(E\) and \(\mu_{A}(x)\) is the degree of membership of \(x\) in \(E\).</li>
<li><b>Fuzzy Number</b>: A fuzzy number is a generalization of a regular, real number. It refers to a connected set of possible values, where each possible value has its own weight between 0 and 1. A fuzzy number is thus a special case of a convex, normalized fuzzy set of the real line.</li>
<li><p>
<b>Triangular Fuzzy Numbers</b>: A fuzzy number \(\sim{A} = (a,b,c)\) is called a triangular fuzzy number if its membership function is given by
</p>

\begin{equation}
\mu_{\sim{A}(x)} =
\begin{cases}
    0               & x < a           \\
    \frac{x-a}{b-a} & a \leq x \leq b \\
    \frac{c-x}{c-b} & b \leq x \leq c \\
    0               & x > c           \\
\end{cases}
\end{equation}</li>
</ul>
</div>
</div>

<div id="outline-container-orgc22e035" class="outline-3">
<h3 id="orgc22e035">Concepts</h3>
<div class="outline-text-3" id="text-orgc22e035">
<p>
\(c\), \(j\), and \(a\) are natural numbers and satisfy Pythagorean&rsquo;s identity \(c^2 + j^2 = a^2\). Such numbers are called a Pythagorean triple (or triangle). Without loss of generality we can also state that we can always find two natural numbers \(j_1\) and \(j_2\) such that
</p>

<ol class="org-ol">
<li>g.c.d\; (j<sub>1</sub>, j<sub>2</sub>) = 1</li>
<li>\(c = j_{2}^2 - j_{1}^2\), \(2j_{1}j_{2}\) and \(a = j_{2}^2 + j_{1}^2\)</li>
<li>$j<sub>2</sub> &gt; j<sub>1</sub> &gt; 0*</li>
</ol>

<p>
Let \(A = (a,b,c,d)\) be a trapezoidal fuzzy number. Then, its $&lambda;$-cut. We then get that \(A^{\lambda} = [a + (b-a)\lambda, d-(d-c)]\) where \(0 \leq \lambda \leq 1\). If we then allow \(b = c\) we regain the triangular fuzzy number.
</p>
</div>

<div id="outline-container-orgf7f1c0b" class="outline-4">
<h4 id="orgf7f1c0b">Properties</h4>
<div class="outline-text-4" id="text-orgf7f1c0b">
<ol class="org-ol">
<li>If \([c,j,a]\) is a Pythagorean Triangular Fuzzy Number, then \([mc,mj,ma]\) is also a Pythagorean Triangular Fuzzy Number</li>
<li>If \(d\) is a common divisor of \(c\) and \(j\), then \(d\) divides \(a\)</li>
<li>Let \(e\) denote a common divisor of \(c\), \(j\), \(a\). Then \([c_1,j_1,a_1]\) such that \(c_1 = c/e\), \(j_1 = j/e\), \(a_1 = a/e\), is also a Pythagorean Triangular Fuzzy Number.</li>
<li>All Pythagorean Triangular Fuzzy Numbers like \([c,j,a]\) are multiples of \([c_1,j_1,a_1]\).</li>
</ol>
</div>
</div>
</div>
</div>

<div id="outline-container-org8609e42" class="outline-2">
<h2 id="org8609e42">Linear Ranking Functions</h2>
<div class="outline-text-2" id="text-org8609e42">
<p>
Linear Ranking Functions (LRFs) are used as a standard technique (heuristic) to prove the termination of a loop. It maps program states to elements of some well-founded ordered sets, such that the value descends whenever the loop completes an iteration. As an example consider the following:
</p>

<pre class="example">
while (4*x1 &gt;= x2 and x2 &gt;= 1)
{
    x1 := (2*x1)/5;
    x2 := x2
}
</pre>

<p>
Note that the body of the loop consists of deterministic update statements. This same loop can also be represented as
</p>

<pre class="example">
while (4*x1 &gt;= 1 and x2 &gt;= 1)
{
    5*x1' &lt;= 2*x1 + 1;
    5*x1' &gt;= 2*x1 - 3;
    x2'    = x2;
}
</pre>

<p>
which is usually called a single-path linear-constraint (SLC) loop.
</p>
</div>
</div>
<div id="outline-container-orgf578827" class="outline-2">
<h2 id="orgf578827">FILP With Fuzzy Constraints</h2>
<div class="outline-text-2" id="text-orgf578827">
\begin{equation}
    \begin{array}{ccc}
        max z = xc &  &                                                          \\
        s.t.       & \sum_{j\in N} a_{ij} x_j <_{\sim} b_i & i \in M = {1,...,m} \\
                   & x_j \geq 0 & j \in N = {1,...,n}                            \\
                   & x_j \in \mathbb{N} & j \in N                                \\
    \end{array}
\end{equation}

<p>
The symbol \(<_{\sim}\) indicates that the decision-maker is willing to permit some violations in the accomplishment of the constraints (i.e. fuzzy constraints defined by some membership function \(\mu_i : \mathbb{R}^n \rightarrow (0,1],\; i \in M\)).
</p>

<p>
The objective is to transform the FILP into an ILP with a modified objective function and some supplementary constraints and variables. To do so, we restate that \(\sum_{j\in N} a_{ij}x_j <_{\sim} b_i\) where \(x_i\) is the variable that varied. Assume the following membership function
</p>

\begin{equation}
\mu_i(x) =
\begin{cases}
    1                     & a_i x \leq b_i                \\
    [(b_i + d_i) - a_i x] & b_i \leq a_i x \leq b_i + d_i \\
    0                     & a_i x \geq b_i + d_i          \\
\end{cases}
\end{equation}

<p>
Which states how much of a &ldquo;member&rdquo; the variable is for a given state. If we take the second parameter and solve for \(a_i x\), we can use that as a constraint for our problem. We rewrite the FILP as a ILP by stating:
</p>

\begin{equation}
    \begin{array}{ccc}
        max z = xc &  &                                 \\
        s.t.       & a_i x \leq b_i + d_i(1 - \alpha) & \\
                   & x_j \geq 0 & j \in N = {1,...,n}   \\
                   & x_j \in \mathbb{N} & j \in N       \\
        x_j \in N  & \alpha \in (0, 1]  & j \in N       \\
    \end{array}
\end{equation}

<p>
Where the \(\alpha\) term is now used as the &ldquo;cut&rdquo; of the constraint (much like the equality done above). It also should be noted that the use of nonlinear membership functions has been shown not to interfere with the computational efficiency of the solution method.
</p>
</div>
</div>

<div id="outline-container-orgc12bb43" class="outline-2">
<h2 id="orgc12bb43">FILP With Imprecise Cost</h2>
<div class="outline-text-2" id="text-orgc12bb43">
<p>
This section covers the FLIP problem with an imprecise coefficients in the cost function.
</p>

\begin{equation}
    \begin{array}{ccc}
        max z = \sum_{j\in N} c_{\sim j}x_{j} &  &                                \\
        s.t.                                  & a_{ij} x \leq b_i               & \\
                                              & x_j \geq 0 & j \in N = {1,...,n}  \\
                                              & x_j \in \mathbb{N} & j \in N      \\
        x_j \in N                             & \alpha \in (0, 1]  & j \in N      \\
    \end{array}
\end{equation}

<p>
Where \(a_{ij}, b_i \in \mathbb{R}\) and \(c_{\sim j} \in F(\mathbb{R})\) and \(F(\mathbb{R})\) being the set of real fuzzy numbers. To solve this there are two approaches
</p>

<ul class="org-ul">
<li>Utilize several well known ranking fuzzy number methods, each provide a different auxiliary conventional optimization model solving the former problem</li>
<li>Explore the behavior of the representing theorem for fuzzy sets when it is used as a tool to solve the proposed problem</li>
</ul>
</div>

<div id="outline-container-org4de0740" class="outline-3">
<h3 id="org4de0740"><span class="done DONE">DONE</span> Fuzzy Number via Linear Ranking Functions</h3>
<div class="outline-text-3" id="text-org4de0740">
<p>
Consider the set of fuzzy numbers \(A = \{g(x) | x\in X\}\) where \(g(x) = c_{\sim}x\). \(A\) represents all primal-feasible results plus the fuzzy-feasible results. If we assume \(x*\) to be the optimal alternative if \(g(x*)\) is the greatest in \(A\), therefore we need to determine the greatest in \(A\). If we know the function to de-fuzzify the values from \(A\) (i.e. \(f:F(\mathbb{R}) \rightarrow \mathbb{R}\)) then \(f(A)>f(B),\; f(A)=f(B),\; f(A)<f(B)\) are equivalent to \(A>B,\; A=B\; A<B\).
</p>

<p>
We assume triangular fuzzy numbers with the membership function of the form:
</p>

\begin{equation}
\forall u \in \mathbb{R}, j\in N, u_{c_j}(u) =
\begin{cases}
    (u - r_j)/(c_j-r_j)   & r_j \leq u \leq c_j \\
    (R_j - u)/(R_j - c_j) & c_j \leq u \leq R_j \\
    0                     & \textrm{otherwise}  \\
\end{cases}
\end{equation}

<p>
Which implies the membership functions for the fuzzy members
</p>

\begin{equation}
\forall u \in \mathbb{R}, j\in N, u_{c_j}(u) =
\begin{cases}
    h_j(z) = (z - rx)/(cz - rx) & x > 0, rx \leq z \leq cx \\
    g_j(z) = (Rx - z)/(Rx - cx) & x > 0, cx \leq z \leq Rx \\
    0 & \textrm{otherwise} \\
\end{cases}
\end{equation}

<p>
From this, if we consider the function \(f(\cdot)\) then we can state the solution to the problem is of the following form:
</p>

\begin{equation}
\begin{array}{cc}
    max & f(c_{\sim} x)                \\
    s.t & Ax \leq b                     \\
        & x_j \in \mathbb{N},\; j \in N \\
\end{array}
\end{equation}

<p>
Where we can let our auxiliary model be something of the form
</p>

\begin{equation}
\begin{array}{c}
 max\{(idx + d'x) * (3cx + dx - d'x)/6 | Ax \leq b\} \\
 max\{[c+(d-d'/3)]x                    | Ax \leq b\} \\
 max\{(cx + dx)/(dx+1)                 | Ax \leq b\} \\
 max\{[c+(d-d')/4]x                    | Ax \leq b\} \\
\end{array}
\end{equation}
</div>
</div>

<div id="outline-container-org66675d1" class="outline-3">
<h3 id="org66675d1">Representation Theorem</h3>
<div class="outline-text-3" id="text-org66675d1">
<p>
Consider the cost function
</p>

\begin{equation}
    \mu (c) = inf_j \mu_j(c_j),\; j \in N
\end{equation}

<p>
If we are able to define the lower and upper bound by using the triangular fuzzy constraints the solution becomes trivial. Allow \(c\) to be of its primal state and create a constraint that gives it a lower and upper bound.
</p>

\begin{equation}
\begin{array}{cc}
    max  & z = cx \\
    s.t. & \Psi(\cdot) \leq c \leq \Gamma(\cdot) \\
\end{array}
\end{equation}
</div>
</div>
</div>

<div id="outline-container-org3e30b7d" class="outline-2">
<h2 id="org3e30b7d">FILP With Fuzzy Numbers As Coefficients Of The Technological Matrix</h2>
<div class="outline-text-2" id="text-org3e30b7d">
<p>
This problem can be formulated as follows:
</p>

\begin{equation}
\begin{array}{ccc}
    max                & z = cx                                      &         \\
    s.t.               & \sum_{j\in N} a_{\sim ij}x_{j} <_{\sim} b_i & i \in M \\
    x_j \geq 0         & j \in N                                     &         \\
    x_j \in \mathbb{N} & j \in N                                     &         \\
\end{array}
\end{equation}

<p>
Where \(a_{\sim ij}, b_i \in F(\mathbb{R})\) and \(<_{\sim}\) allows the decision maker flexibility in the constraints.
</p>

<p>
Using the first index of Yager we get:
</p>

\begin{equation}
\begin{array}{cc}
    max  & z = 2x_1 + 5x_2                                 \\
    s.t. & 2_x1 - 1.166x_2 \leq 8.66 + 3.166(1-\alpha)     \\
         & 2.333x_1 + 8.333x_2 \leq 31.66 + 4.33(1-\alpha) \\
\end{array}
\end{equation}
</div>
</div>
<div id="outline-container-org374ddb7" class="outline-2">
<h2 id="org374ddb7">References</h2>
<div class="outline-text-2" id="text-org374ddb7">
</div>
<div id="outline-container-org43723cb" class="outline-3">
<h3 id="org43723cb">Fuzzy Linear Programming</h3>
<div class="outline-text-3" id="text-org43723cb">
<ul class="org-ul">
<li><a href="https://git.brownhaus.xyz/School/Spring2021/src/branch/master/FundamentalsOfResourceAllocation/Literature/FuzzyBAP.pdf">A Fully Fuzzy Linear Programming Model to the Berth Allocation Problem</a></li>
</ul>
</div>
</div>

<div id="outline-container-org11c6a49" class="outline-3">
<h3 id="org11c6a49">Fuzzy Theory</h3>
<div class="outline-text-3" id="text-org11c6a49">
<ul class="org-ul">
<li><a href="https://www.sciencedirect.com/science/article/pii/0022247X83902536">An Introduction to Fuzzy Linear Programming Problems</a></li>
<li><a href="https://www.sciencedirect.com/science/article/pii/0022247X83902536">Fuzzy Numbers</a></li>
<li><a href="https://www.researchgate.net/publication/318946539_Theory_of_Triangular_Fuzzy_Number">Theory of Triangular Fuzzy Number</a></li>
</ul>
</div>
</div>

<div id="outline-container-orgbb9ebc8" class="outline-3">
<h3 id="orgbb9ebc8">Ranking Functions</h3>
<div class="outline-text-3" id="text-orgbb9ebc8">
<ul class="org-ul">
<li><a href="https://link-springer-com.dist.lib.usu.edu/content/pdf/10.1007/s10009-019-00549-9.pdf">On Ranking Functions of Single-Path Linear-Constraint Loops</a></li>
<li><a href="https://www.bugseng.com/sites/default/files/BagnaraM13PPDP.pdf">Eventual Linear Ranking Functions</a></li>
<li><a href="https://ieeexplore-ieee-org.dist.lib.usu.edu/document/4046341">Ranking Fuzzy Subsets Over The Unit Interval</a></li>
<li><a href="https://www-scopus-com.dist.lib.usu.edu/record/display.uri?eid=2-s2.0-0019585325&amp;origin=resultslist&amp;sort=plf-f&amp;src=s&amp;sid=e04fd19ef279878a8a73c1579d0e5e52&amp;sot=b&amp;sdt=b&amp;sl=74&amp;s=TITLE-ABS-KEY%28A+procedure+for+ordering+fuzzy+subsets+of+the+unit+interval%29&amp;relpos=0&amp;citeCnt=963&amp;searchTerm=">A Procedure For Ordering Fuzzy Subsets Of The Unit Interval</a></li>
<li><a href="https://jmlr.csail.mit.edu/papers/volume10/xu09c/xu09c.pdf">Learning Linear Ranking Functions for Beam Search with Applications to Planning</a></li>
</ul>
</div>
</div>
</div>
<div class="taglist"></div>]]></description>
  <link>https://alexb7711.github.io/2021-06-01-fuzzy-linear-programming.html</link>
  <pubDate>Tue, 01 Jun 2021 20:42:00 -0600</pubDate>
</item>
<item>
  <title><![CDATA[A Guide To Hosting An Email Server In A Residential Area (Port 25 Blocked)]]></title>
  <description><![CDATA[
<nav id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgcca486a">Email Server Components</a>
<ul>
<li><a href="#orgd1974bb">Postfix</a></li>
<li><a href="#org2ad6865">Dovecot</a></li>
<li><a href="#orgce5745e">Spamassasin</a></li>
<li><a href="#org7adb28c">OpenDKIM</a></li>
</ul>
</li>
<li><a href="#org6b19fca">Problem with Residential email servers</a>
<ul>
<li><a href="#org836edf5">Borrowing SMTP server</a></li>
<li><a href="#org369715d">Reroute incoming mail</a></li>
</ul>
</li>
</ul>
</div>
</nav>
<p>
&#x2014;
</p>

<p>
If you are reading this, you have an extra PC, NAS, or raspberry pi that you are looking to make into a email server. Unfortunatelly, email servers are notoriously difficult to create. Fortunately enough, scripts have been created that more or less automate this process and stream lined a lot of it. Particularly, I nabbed a script off [Luke Smith](lukesmith.xyz) that installs and configures it for you. Unfortunately (again), if you are setting this server up in a residential area with residential email service you may have some difficulties outside of setting up the email server battling with your ISP (Internet Service Provider) due to blocked ports. Fortunately (again), there is a simple work around.
</p>

<p>
Conceptually there is not that much to do, which is what this blog post is going to be about. The specifics will be left to the script, so if you are interested in learning how that works go read through that. It isn&rsquo;t earth shattering, but there are enough intricies that I am going to stick to borrowing the script when needed. What it boils down to is: install postfix, install dovecot, install spamassasin, install OpenDKIM, configure postfix to utilize SMTP, configure dovecot to connect to postfix and allow external connection for IMAP, link spamassasin, and hook up OpenDKIM. If you didn&rsquo;t get all that, don&rsquo;t worry. Each section will break down the components.
</p>

<p>
The issue I came accross while setting up my email server is that my ISP (Internet Service Provider) was blocking port 25. Although I had a working email server, it was rendered useless because I couldn&rsquo;t send/receive email outside of my local network. This just requires some external help and minor tweaks on your end to get things moving smoothly.
</p>

<p>
I&rsquo;ll also preface this by saying that the script README says that it is configured for VPS (Vitual Private Servers), but it worked great on my little 300$ hp pavillion makeshift server running Debian 10. Now to talk about each component.
</p>

<div id="outline-container-orgcca486a" class="outline-2">
<h2 id="orgcca486a">Email Server Components</h2>
<div class="outline-text-2" id="text-orgcca486a">
</div>
<div id="outline-container-orgd1974bb" class="outline-3">
<h3 id="orgd1974bb"><a href="http://www.postfix.org/">Postfix</a></h3>
<div class="outline-text-3" id="text-orgd1974bb">
<p>
As stated by <a href="https://en.wikipedia.org/wiki/Postfix_(software)">Wikipedia</a>:
</p>

<blockquote>
<p>
Postfix is a free and open-source mail transfer agent (MTA) that routes and delivers electronic mail.
</p>
</blockquote>

<p>
Or in other words, this is the guy that will send/receive mail to and from the outside world. It allows for <a href="https://en.wikipedia.org/wiki/Simple_Mail_Transfer_Protocol">SMTP</a> with <a href="https://en.wikipedia.org/wiki/Transport_Layer_Security">TLS</a> (which is what is enabled with this script), and allows for email to be encrypted (again if you want to know the specifics look at the script). This program is also the one who will send your mail down the chain to be saved once it has been grabbed. It has to work with Dovecot to know how to format it so you can access it with your email client and Spamassasin to know what sort of mail to keep and reject.
</p>
</div>
</div>

<div id="outline-container-org2ad6865" class="outline-3">
<h3 id="org2ad6865"><a href="https://www.dovecot.org/">Dovecot</a></h3>
<div class="outline-text-3" id="text-org2ad6865">
<blockquote>
<p>
Dovecot is an open source IMAP and POP3 email server for Linux/UNIX-like systems
</p>
</blockquote>

<p>
Basically, this is what you interface with to access your email through your email client. Again, it allows for encrypted connection and what not. It is also responsible for the structure of you mail folders. Say you have an Inbox, Junk, Sent, and Drafts folder. That is laid out with Dovecot. It also needs to know about Postfix in order to know where to grab it&rsquo;s mail from.
</p>
</div>
</div>

<div id="outline-container-orgce5745e" class="outline-3">
<h3 id="orgce5745e"><a href="https://spamassassin.apache.org/">Spamassasin</a></h3>
<div class="outline-text-3" id="text-orgce5745e">
<p>
What it does is pretty self evident by the name. To be safe though here is a description via <a href="https://en.wikipedia.org/wiki/SpamAssassin">Wikipedia.</a>
</p>

<blockquote>
<p>
It uses a variety of spam-detection techniques, including DNS and fuzzy checksum techniques, Bayesian filtering, external programs, blacklists and online databases.
</p>
</blockquote>
</div>
</div>

<div id="outline-container-org7adb28c" class="outline-3">
<h3 id="org7adb28c"><a href="http://opendkim.org/">OpenDKIM</a></h3>
<div class="outline-text-3" id="text-org7adb28c">
<blockquote>
<p>
OpenDKIM is an open source implementation of the DKIM (Domain Keys Identified Mail) sender authentication system proposed by the E-mail Signing Technology Group (ESTG), now standardized by the IETF.
</p>
</blockquote>

<p>
In other words, it just signs your email in a way to show that is valid in such a way that big email servers (Like Gmail, Outlook, etc.) will accept your mail instead of tossing it to the side as spam.
</p>
</div>
</div>
</div>

<div id="outline-container-org6b19fca" class="outline-2">
<h2 id="org6b19fca">Problem with Residential email servers</h2>
<div class="outline-text-2" id="text-org6b19fca">
<p>
Port 25 is blocked by a <b><b>lot</b></b> of ISPs. Why does that matter? Well, port 25 is what mail servers use to transfer email. That means that your email server is only good locally. There are two things you need to do in order to fix this problem:
</p>

<ol class="org-ol">
<li>You need to borrow an SMTP server</li>
<li>You need an external service to re-route your email to another port</li>
</ol>

<p>
Maybe it isn&rsquo;t the best answer since you are probably trying to gain more independence and privacy on the internet, but it works amazingly.
</p>
</div>

<div id="outline-container-org836edf5" class="outline-3">
<h3 id="org836edf5">Borrowing SMTP server</h3>
<div class="outline-text-3" id="text-org836edf5">
<p>
The quick and easy way to get it up and running is to borrow Google&rsquo;s STMP servers. If you have an account, then you are all set to get this done. This also should work if your ISP supplies an SMTP server. You will just need the credentials for your ISP email account.
</p>

<p>
First, create a file such as <code>/etc/postfix/sasl_passwd</code>. In that file you are going to type out:
</p>

<pre class="example">
[mail.example.com]:587 user@example.com:passwd
</pre>

<p>
where <code>mail.example.com</code> will be <code>smtp.gmail.com</code> if you are using gmail. Then supply your email address and password as shown. For the sake of security, and how almost all examples include, is to make this file only accessible to read or write via root. To do so type:
</p>

<pre class="example">
chmod 0600 /etc/postfix/sasl_passwd
</pre>

<p>
Then create a database for postfix to access by typing:
</p>

<pre class="example">
postmap /etc/postfix/sasl_passwd
</pre>

<p>
Now to configure postfix to read that map. Open <code>/etc/postfix/main.cf</code> and find/create the lines as follows:
</p>

<pre class="example">
relayhost                  = [mail.example.com]:587
smtp_sasl_auth_enable      = yes
smtp_sasl_password_maps    = hash:/etc/postfix/sasl_passwd
smtp_sasl_security_options = noanonymous
smtp_tls_CApath            = /etc/ssl/certs
smtp_use_tls               = yes
</pre>

<p>
Restart postfix via <code>systemctl restart postfix</code> and try sending an email to yourself.
</p>
</div>
</div>

<div id="outline-container-org369715d" class="outline-3">
<h3 id="org369715d">Reroute incoming mail</h3>
<div class="outline-text-3" id="text-org369715d">
<p>
If you are in a residential area, you most likely need a DDNS (Dynamic Domain Name System), personally I use [Dynu](dynu.com). It is free, and easy to set up. The only thing you need to do here is create an account, go to Dynamic DNS Service, click the add button, use one of the given DNS names or type in your own. If you opted to use your own domain name on the website you got your domain name from in your &ldquo;External Hosts&rdquo; record type in the ip address given to you by Dynu.
</p>

<p>
First thing you need to do is to create a [rollernet.us](rollernet.us) account. Go to mail derives, select SMTP Redirection (Direct Connection) (I believe that is the one that I am using. At any rate, for free accounts, only one of the SMTP redirections work). Type in your domain, and under your destination server, type your domain name again. Under port, type something like 2525 (this is the port we are going to be redirecting mail to). Now you need to set permissions for what is allowed through. In the &ldquo;Mail Services&rdquo; base page there is a hyper link labeled &ldquo;valid user table&rdquo;, click that. For all domain names given, ensure that the &ldquo;Default Action&rdquo; is &ldquo;Allow&rdquo;. This will allow all data incoming on port 25 be moved to port 2525.
</p>

<p>
Going back to the website you got your Domain name from. Under &ldquo;Email Services&rdquo; create two new entries with the &ldquo;Points to&rdquo; options filled out as <code>mail.rollernet.us</code> and <code>mail2.rollernet.us</code>.
</p>

<p>
There are two ways you can make sure that you receive mail from this untraditional port in postfix. You can either redirect port 2525 back to port 25 on your router, or you can add the line
</p>

<pre class="example">
2525 inet n - y - - smtpd
	-o content_filter=spamassassin
</pre>

<p>
After you complete all these configurations, give everything some time for all settings to take effect (those set for the DDNS and your domain name mostly). You should now be able to send and receive email from you home server! If you have any questions about the specific setup process, I&rsquo;d recommend watching <a href="https://videos.lukesmith.xyz/videos/watch/9eac5348-7cc0-491e-ac9d-8f2ba1e3e69f">Luke Smith&rsquo;s Video about setting up an email server with his script</a>. Again, all these changes are built off of the changes made by that script.
</p>

<p>
Thank you for reading, and happy emailing!
</p>
</div>
</div>
</div>
<div class="taglist"></div>]]></description>
  <link>https://alexb7711.github.io/2020-08-15-Guide-To-Creating-An-Email-Server-In-A-Residential-Area.html</link>
  <pubDate>Mon, 17 May 2021 13:43:00 -0600</pubDate>
</item>
<item>
  <title><![CDATA[Updating Suckless Utilities]]></title>
  <description><![CDATA[
<nav id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgd517ba8">Creating Another Remote Repository</a></li>
<li><a href="#org6dd9f7c">Merging Your Source with Suckless&rsquo;s</a></li>
</ul>
</div>
</nav>
<p>
&#x2014;
</p>

<p>
I never considered the scenario of wanting to upgrade my build of st, dwm, or any other &ldquo;forked&rdquo; project that I may have until I wanted to upgrade st to the latest release in order to try the new <a href="https://www.youtube.com/watch?v=sdeX2S2uOeA">scrolling functionality</a> that they have added. My brain immediately accepted the fact that I was going to download a new copy of st and repatch everything I currently have&#x2026; but that isn&rsquo;t very sustainable for long term use especially if you want to update every so often. I thought about it for an hour or so and was struck with the simple solution of just using git&rsquo;s merge feature. The thing is on how to get it configured simply. Like they always say with programming, &ldquo;think lazy&rdquo;.
</p>

<div id="outline-container-orgd517ba8" class="outline-2">
<h2 id="orgd517ba8">Creating Another Remote Repository</h2>
<div class="outline-text-2" id="text-orgd517ba8">
<p>
Much like how some people use this to keep multiple repositories up to date, multiple remote repositories are also very handy for updating (basically the same thing stated in different words). To take advantage of this feature, you can run:
</p>

<pre class="example">
git remote add -m suckless https://git.suckless.org/st
</pre>

<p>
to create another remote repository called suckless. The `-m` flag is set up to point at remote’s &lt;master&gt; branch.
</p>

<p>
Now if you run
</p>

<pre class="example">
git remote update
</pre>

<p>
You can make sure you are up to date on HEAD of suckless&rsquo;s master.
</p>
</div>
</div>

<div id="outline-container-org6dd9f7c" class="outline-2">
<h2 id="org6dd9f7c">Merging Your Source with Suckless&rsquo;s</h2>
<div class="outline-text-2" id="text-org6dd9f7c">
<p>
To do this, I like to create a branch to make sure I don&rsquo;t destroy my master branch:
</p>

<pre class="example">
git checkout -b suckless
</pre>

<p>
Then you simply have to run:
</p>

<pre class="example">
git merge suckless/master
</pre>

<p>
and git will attempt to merge your code with that of suckless/master. You will most likely get conflicts, so be sure to checkout my post on how to set up neovim as a merge tool.
</p>
</div>
</div>
<div class="taglist"></div>]]></description>
  <link>https://alexb7711.github.io/2020-07-08-Updating-Suckless-Utilities.html</link>
  <pubDate>Mon, 17 May 2021 13:43:00 -0600</pubDate>
</item>
<item>
  <title><![CDATA[Simple Callback Methods In C++]]></title>
  <description><![CDATA[
<nav id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgeb847e4">Callbacks</a></li>
<li><a href="#org892b5a4">Why Would You Want To Use A Callback?&rsquo;&rsquo;</a></li>
<li><a href="#org5cfaad5">A Simple Example</a></li>
<li><a href="#org6715986">Shortcomings</a></li>
<li><a href="#org13926d1">My Problem That Was Fixed With Callbacks</a></li>
<li><a href="#org5fee081">References</a></li>
</ul>
</div>
</nav>
<p>
I have been spending a lot of time as of late creating a small framework for developing games. It is in an extreme infancy still, but it has given me a lot of chances to practice and learn a lot of new techniques. One of the things I&rsquo;ve always known about that would be useful are callback methods, but I never really had the time to implement it up until today. The concept is not to difficult to understand (we will go into how it works later), but the actual application is a little more complicated. Not by much, but enough to give me a hard time for a few hours.
</p>

<p>
To start, lets cover what a callback method is and how it can be used to your advantage.
</p>

<div id="outline-container-orgeb847e4" class="outline-2">
<h2 id="orgeb847e4">Callbacks</h2>
<div class="outline-text-2" id="text-orgeb847e4">
<p>
A callback is a piece of code that is used to execute (call back) a specified argument. In other words, if you pass a pointer of a function (foo) to another function (bar) as an argument and execute it, then the function pointer (foo) is a callback. As stated on [GeeksForGeeks](<a href="https://www.geeksforgeeks.org/">https://www.geeksforgeeks.org/</a>).
</p>

<p>
&gt; In C, a callback function is a function that is called through a function pointer.
</p>

<p>
That is specific enough for our purpose right now. If you would like read more about Callbacks, here is a link to [Wikipedia](<a href="https://en.wikipedia.org/wiki/Callback_(computer_programming)">https://en.wikipedia.org/wiki/Callback_(computer_programming)</a>).
</p>
</div>
</div>

<div id="outline-container-org892b5a4" class="outline-2">
<h2 id="org892b5a4">Why Would You Want To Use A Callback?&rsquo;&rsquo;</h2>
<div class="outline-text-2" id="text-org892b5a4">
<p>
As will all things, it is situational as to why you would like to use it. It doesn&rsquo;t solve all your problems, but it does make a lot of tasks quite easy. It is useful when you can make generic code that can apply different logic. Now what do I mean by that? For example in &ldquo;[The C Programming Language](<a href="https://www.amazon.com/dp/0131103628?tag=duckduckgo-brave-20&amp;linkCode=osi&amp;th=1&amp;psc=1">https://www.amazon.com/dp/0131103628?tag=duckduckgo-brave-20&amp;linkCode=osi&amp;th=1&amp;psc=1</a>)&rdquo; the example they give is a single method that can be used to call different types of sorting methods. They use the same call to sort, but apply different sorting methods on the same bit of data.
</p>

<p>
Another more useful (but more complex) reason to use callbacks are in the case of message driven applications. In this case, you have a bunch of methods that have the parameters of the form:
</p>

<div class="org-src-container">
<pre class="src src-C"><span style="color: #0000ff; font-weight: bold;">foo</span><span style="color: #8c8c8c;">(</span>std::string message, <span style="color: #00ff00;">void</span>* <span style="color: #ffff00;">data</span><span style="color: #8c8c8c;">)</span>
<span style="color: #8c8c8c;">{</span>...<span style="color: #8c8c8c;">}</span>
</pre>
</div>

<p>
stored as a list. Every time you have an event occur, you can send out a message of certain type and pass the data. The callback handler will simply loop through the entire list of callback functions and attempt to pass the data to them. If the method is of the type <code>message</code>, then it will accept the data. Now because the data is passed in as a type <code>void*</code>, it can then be cast to any type.
</p>
</div>
</div>

<div id="outline-container-org5cfaad5" class="outline-2">
<h2 id="org5cfaad5">A Simple Example</h2>
<div class="outline-text-2" id="text-org5cfaad5">
<p>
Below is a simple class that uses a callback to count to 10. To start, you can see that we have a method called <code>callback(int count)</code> that all that it knows is to print the integer that it gets if it is smaller than 10. <code>caller(void (Foo::*fnc)(int))</code> is the function that is going to be providing the values to <code>callback</code>, and <code>run()</code> is just the driving code that will be called from <code>main()</code>.
</p>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #0000ff; font-weight: bold;">#include</span> <span style="color: #8c8c8c;">&lt;</span><span style="color: #00ff00;">cstdio</span><span style="color: #8c8c8c;">&gt;</span>

<span style="color: #00ffff; font-weight: bold;">class</span> <span style="color: #00ff00;">Foo</span>
<span style="color: #8c8c8c;">{</span>
    <span style="color: #00ffff; font-weight: bold;">public</span>:
    <span style="color: #0000ff; font-weight: bold;">Foo</span><span style="color: #93a8c6;">()</span>
    <span style="color: #93a8c6;">{}</span>

    <span style="color: #00ff00;">void</span> <span style="color: #0000ff; font-weight: bold;">callback</span><span style="color: #93a8c6;">(</span><span style="color: #00ff00;">int</span> <span style="color: #ffff00;">count</span><span style="color: #93a8c6;">)</span>
    <span style="color: #93a8c6;">{</span>
        <span style="color: #00ffff; font-weight: bold;">if</span> <span style="color: #b0b1a3;">(</span>count &gt; <span style="color: #ff00ff;">10</span><span style="color: #b0b1a3;">)</span> <span style="color: #00ffff; font-weight: bold;">return</span>;
        printf<span style="color: #b0b1a3;">(</span><span style="color: #00ff00;">"%d\n"</span>, count++<span style="color: #b0b1a3;">)</span>;
    <span style="color: #93a8c6;">}</span>

    <span style="color: #00ff00;">void</span> <span style="color: #0000ff; font-weight: bold;">caller</span><span style="color: #93a8c6;">(</span><span style="color: #00ff00;">void</span> <span style="color: #b0b1a3;">(</span><span style="color: #ff00ff;">Foo</span>::*<span style="color: #00ff00;">fnc</span><span style="color: #b0b1a3;">)(</span><span style="color: #00ff00;">int</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
    <span style="color: #93a8c6;">{</span>
        <span style="color: #00ffff; font-weight: bold;">for</span> <span style="color: #b0b1a3;">(</span><span style="color: #00ff00;">int</span> <span style="color: #ffff00;">i</span> = <span style="color: #ff00ff;">1</span>; i &lt; <span style="color: #ff00ff;">12</span>; ++i<span style="color: #b0b1a3;">)</span>
            <span style="color: #b0b1a3;">(</span><span style="color: #00ffff; font-weight: bold;">this</span>-&gt;*fnc<span style="color: #b0b1a3;">)(</span>i<span style="color: #b0b1a3;">)</span>;
    <span style="color: #93a8c6;">}</span>

    <span style="color: #00ff00;">void</span> <span style="color: #0000ff; font-weight: bold;">run</span><span style="color: #93a8c6;">()</span>
    <span style="color: #93a8c6;">{</span>
        caller<span style="color: #b0b1a3;">(</span>&amp;<span style="color: #ff00ff;">Foo</span>::callback<span style="color: #b0b1a3;">)</span>;
    <span style="color: #93a8c6;">}</span>
<span style="color: #8c8c8c;">}</span>;

<span style="color: #00ff00;">int</span> <span style="color: #0000ff; font-weight: bold;">main</span><span style="color: #8c8c8c;">()</span>
<span style="color: #8c8c8c;">{</span>
    <span style="color: #00ff00;">Foo</span> <span style="color: #ffff00;">foo</span>;
    foo.run<span style="color: #93a8c6;">()</span>;
<span style="color: #8c8c8c;">}</span>
</pre>
</div>

<p>
Looking specifically at the parameter list of <code>caller(void (Foo::*fnc)(int))</code>, <code>void (Foo::*fnc)(int)</code> is used to specify that we are going to be passing a function that has a <code>void</code> return type, it is a part of the <code>Foo</code> class, <code>*fnc</code> is just the pointer to the method that is being passed (we don&rsquo;t know what it is yet), and <code>(int)</code> which is the argument that <code>*fnc</code> can take. It is important to take not of the parenthesis. They <b>must</b> look like this in order specify that we are passing a function pointer rather than a <code>void*</code>.
</p>

<p>
At this point, we don&rsquo;t know what method is coming in, but we know what the method is going to look like and from what object that method is a part of. Now lets look at the implementation of <code>callback</code>.
</p>

<div class="org-src-container">
<pre class="src src-C"><span style="color: #00ff00;">void</span> <span style="color: #0000ff; font-weight: bold;">caller</span><span style="color: #8c8c8c;">(</span><span style="color: #00ff00;">void</span> <span style="color: #93a8c6;">(</span>Foo::*fnc<span style="color: #93a8c6;">)(</span><span style="color: #00ff00;">int</span><span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>
<span style="color: #8c8c8c;">{</span>
    <span style="color: #00ffff; font-weight: bold;">for</span> <span style="color: #93a8c6;">(</span><span style="color: #00ff00;">int</span> <span style="color: #ffff00;">i</span> = <span style="color: #ff00ff;">1</span>; i &lt; <span style="color: #ff00ff;">12</span>; ++i<span style="color: #93a8c6;">)</span>
        <span style="color: #93a8c6;">(</span>this-&gt;*fnc<span style="color: #93a8c6;">)(</span>i<span style="color: #93a8c6;">)</span>;
<span style="color: #8c8c8c;">}</span>
</pre>
</div>

<p>
The tricky part here is how we dereference the function. Like how the parenthesis were important in the argument list, the parenthesis are important in how we dereference the function pointer. You must also specify <code>this-&gt;</code> for the compiler to understand that the function call is from the class type <code>Foo</code>.
</p>

<p>
As for <code>run</code>, that is simple. We just need to pass the pointer to the function which is straightforward. Again, we have to specify the owner of the method by placing <code>Foo::</code> in front of the function name.
</p>

<div class="org-src-container">
<pre class="src src-C"><span style="color: #00ff00;">void</span> <span style="color: #0000ff; font-weight: bold;">run</span><span style="color: #8c8c8c;">()</span>
<span style="color: #8c8c8c;">{</span>
    caller<span style="color: #93a8c6;">(</span>&amp;Foo::callback<span style="color: #93a8c6;">)</span>
<span style="color: #8c8c8c;">}</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org6715986" class="outline-2">
<h2 id="org6715986">Shortcomings</h2>
<div class="outline-text-2" id="text-org6715986">
<p>
Pretty simple once you have done it once, right? It can&rsquo;t be all good though as you probably guessed from the heading. The drawback of this type of declaration is that the method calls must be from inside the same class. Why is that the case though? Couldn&rsquo;t you just do something like:
</p>

<div class="org-src-container">
<pre class="src src-C"><span style="color: #00ff00;">void</span> <span style="color: #0000ff; font-weight: bold;">caller</span><span style="color: #8c8c8c;">(</span><span style="color: #00ff00;">void</span> <span style="color: #93a8c6;">(</span>Bar::*fnc<span style="color: #93a8c6;">)(</span><span style="color: #00ff00;">int</span><span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>
<span style="color: #8c8c8c;">{</span>...<span style="color: #8c8c8c;">}</span>
</pre>
</div>

<p>
and call a method from <code>Bar</code>? The problem with this is that you can know the class definition, but you can&rsquo;t know which instance you are referring to. In the way outlined above, the <code>this-&gt;</code> pointer indicates which instance you are talking about, so it all works out. But if you have 3 instances of <code>Bar</code>, using this method you can&rsquo;t possibly know which instance you are referring to.
</p>

<p>
The good news though is that with minor adjustments you can know!
</p>

<p>
Rather than doing it the way we stated above, try:
</p>

<div class="org-src-container">
<pre class="src src-C"><span style="color: #00ff00;">void</span> <span style="color: #0000ff; font-weight: bold;">caller</span> <span style="color: #8c8c8c;">(</span><span style="color: #00ff00;">void</span> <span style="color: #93a8c6;">(</span>*<span style="color: #0000ff; font-weight: bold;">fnc</span><span style="color: #93a8c6;">)(</span><span style="color: #00ff00;">int</span><span style="color: #93a8c6;">)</span>, <span style="color: #00ff00;">void</span>* <span style="color: #ffff00;">instance</span><span style="color: #8c8c8c;">)</span>
<span style="color: #8c8c8c;">{</span>...<span style="color: #8c8c8c;">}</span>
</pre>
</div>

<p>
Everything will be more or less the same. The only difference is now that you have the instance of the object, you can static cast it to the correct type and then dereference the method. Pretty slick, right? It requires a little more work, but using this method you can potentially create a message handler class!
</p>
</div>
</div>

<div id="outline-container-org13926d1" class="outline-2">
<h2 id="org13926d1">My Problem That Was Fixed With Callbacks</h2>
<div class="outline-text-2" id="text-org13926d1">
<p>
As for my case, it is a lot simpler than some of the examples I gave above. My problem is that I wanted to open and parse two different files that will similar formatting but contain two different types of data. More specifically, for my game framework I want to be able to load/save files from a text file. To do this I am currently employing two files: <code>Maps.txt</code> and <code>Dictionary.txt</code>. <code>Maps.txt</code> looks like:
</p>

<pre class="example" id="org234f63e">
[Default]
0 0 1
1 1 0
1 0 0
</pre>

<p>
Where <code>[Default]</code> is the name of the map, and the matrix underneath specified the type of tiles that will be placed in that specific area. But what do those tiles mean? Thats what <code>Dictionary.txt</code> is for. That file looks like this:
</p>

<pre class="example" id="org94b1a31">
[Default]
0 0 256 64
1 0 128 64
</pre>

<p>
Where the first character is the identifier that will be used in <code>Map.txt</code>, the second is the <code>x</code> location on the asset sheet, then the <code>y</code> position on the asset sheet, and the width/height of the texture (I&rsquo;m assuming squares). Because they both have similar ways of being parsed, the only part that is going to change is how the data will be stores. Rather than writing two separate methods that will open the file and loop through it the same way, why not create one method that does that, but implements different ways of storing the data.
</p>

<p>
Similarly to the examples given above I wrote a generic method that will execute a callback:
</p>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #ffff00;">/*</span>
<span style="color: #ffff00;"> *--------------------------------------------------------------------------------------</span>
<span style="color: #ffff00;"> *       Class:  TileMap</span>
<span style="color: #ffff00;"> *      Method:  TileMap :: readFromFileCallback</span>
<span style="color: #ffff00;"> * Description:  Callback method used to read from config files.</span>
<span style="color: #ffff00;"> *--------------------------------------------------------------------------------------</span>
<span style="color: #ffff00;"> */</span>
<span style="color: #00ff00;">void</span> <span style="color: #ff00ff;">TileMap</span>::<span style="color: #0000ff; font-weight: bold;">readFromFileCallback</span><span style="color: #8c8c8c;">(</span><span style="color: #00ff00;">void</span> <span style="color: #93a8c6;">(</span><span style="color: #ff00ff;">TileMap</span>::*<span style="color: #0000ff; font-weight: bold;">method</span><span style="color: #93a8c6;">)(</span><span style="color: #ff00ff;">std</span>::<span style="color: #00ff00;">ifstream</span>&amp;, <span style="color: #ff00ff;">std</span>::<span style="color: #00ff00;">string</span>&amp;<span style="color: #93a8c6;">)</span>,
                                   <span style="color: #ff00ff;">std</span>::<span style="color: #00ff00;">string</span>&amp; <span style="color: #ffff00;">map_name</span><span style="color: #8c8c8c;">)</span>
<span style="color: #8c8c8c;">{</span>
  <span style="color: #ff00ff;">std</span>::<span style="color: #00ff00;">ifstream</span> <span style="color: #ffff00;">file_in</span><span style="color: #93a8c6;">(</span>m_map_text_file<span style="color: #93a8c6;">)</span>;
  <span style="color: #ff00ff;">std</span>::<span style="color: #00ff00;">string</span> <span style="color: #ffff00;">line</span>;

  <span style="color: #00ffff; font-weight: bold;">if</span> <span style="color: #93a8c6;">(</span>file_in.is_open<span style="color: #b0b1a3;">()</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">{</span>
    <span style="color: #00ffff; font-weight: bold;">while</span> <span style="color: #b0b1a3;">(</span><span style="color: #ff00ff;">std</span>::getline<span style="color: #8c8c8c;">(</span>file_in, line<span style="color: #8c8c8c;">)</span><span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">{</span>
      <span style="color: #8c8c8c;">(</span><span style="color: #00ffff; font-weight: bold;">this</span>-&gt;*method<span style="color: #8c8c8c;">)(</span>file_in, map_name<span style="color: #8c8c8c;">)</span>;
    <span style="color: #b0b1a3;">}</span>

    file_in.close<span style="color: #b0b1a3;">()</span>;
  <span style="color: #93a8c6;">}</span>
   <span style="color: #00ffff; font-weight: bold;">else</span>
     printf<span style="color: #93a8c6;">(</span><span style="color: #00ff00;">"ERROR: COULD NOT LOAD FILE!\n"</span><span style="color: #93a8c6;">)</span>;

  <span style="color: #00ffff; font-weight: bold;">return</span>;
<span style="color: #8c8c8c;">}</span>

</pre>
</div>

<p>
The method that is accepted is a <code>void</code> method that has a <code>ifstream</code> reference and a <code>string</code>. I&rsquo;m also passing a separate string <code>map_name</code> that is used in <code>method</code> to figure out which file is being parsed!
</p>

<p>
Super simple, and now I can use this one method to parse different files of the same formatting style!
</p>
</div>
</div>

<div id="outline-container-org5fee081" class="outline-2">
<h2 id="org5fee081">References</h2>
<div class="outline-text-2" id="text-org5fee081">
<ul class="org-ul">
<li><a href="https://www.geeksforgeeks.org/callbacks-in-c/">GeeksForGeeks</a></li>
<li><a href="https://www.amazon.com/dp/0131103628?tag=duckduckgo-brave-20&amp;linkCode=osi&amp;th=1&amp;psc=1">The C Programming Language</a></li>
</ul>
</div>
</div>
<div class="taglist"></div>]]></description>
  <link>https://alexb7711.github.io/2020-05-15-Callback-Methods-In-A-Class.html</link>
  <pubDate>Mon, 17 May 2021 13:43:00 -0600</pubDate>
</item>
<item>
  <title><![CDATA[The C Programming Language Notes]]></title>
  <description><![CDATA[
<nav id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org3990e2c">Types, Operators, and Expressions</a>
<ul>
<li><a href="#orgb5273e4">Constants</a></li>
<li><a href="#orgbdc1cd5">Increment and Decrement Operators</a></li>
<li><a href="#orgfcc7d8d">Bitwise Operators</a></li>
</ul>
</li>
<li><a href="#org546387c">Control Flow</a>
<ul>
<li><a href="#org86979e0">Break and Continue</a></li>
<li><a href="#orgc9d37fd">GoTo and Labels</a></li>
</ul>
</li>
<li><a href="#org4b521c0">Functions and Program Structure</a>
<ul>
<li><a href="#orgf990b75">Static Variables</a></li>
</ul>
</li>
<li><a href="#org7f7ebb7">Types, Operators, and Expressions</a>
<ul>
<li><a href="#orge098547">Constants</a></li>
<li><a href="#orgef71797">Increment and Decrement Operators</a></li>
<li><a href="#org79e7245">Bitwise Operators</a></li>
</ul>
</li>
<li><a href="#orgfc455b0">Control Flow</a>
<ul>
<li><a href="#org62703ac">Break and Continue</a></li>
<li><a href="#orge7e65ec">GoTo and Labels</a></li>
</ul>
</li>
<li><a href="#org70b05c0">Functions and Program Structure</a>
<ul>
<li><a href="#org3a7ff70">Static Variables</a></li>
</ul>
</li>
<li><a href="#orgac22ccf">Pointers and Arrays</a>
<ul>
<li><a href="#org5b331c7">Address Arithmetic</a></li>
<li><a href="#org7e4f7ad">Character Pointers and Functions</a></li>
<li><a href="#org90179c8">Pointer Arrays; Pointers to Pointers</a></li>
<li><a href="#org232f73a">Multi-Dimensional Arrays</a></li>
<li><a href="#org5d1c578">Initialization of Pointer Arrays</a></li>
<li><a href="#org94450c6">Pointers vs. Multi-Dimensional Array</a></li>
<li><a href="#org72136b8">Command Line Arguments</a></li>
<li><a href="#org37e0a30">Pointers To Functions</a></li>
<li><a href="#org3d1e9a1">Complicated Declarations</a></li>
</ul>
</li>
<li><a href="#orga6de34c">Structures</a>
<ul>
<li><a href="#org68af864">Arrays of Structures</a></li>
<li><a href="#org85040a5">Table Lookup</a></li>
</ul>
</li>
<li><a href="#org89e7116">Input and Output</a>
<ul>
<li><a href="#orgf7771d7">Command Execution</a></li>
<li><a href="#orgc004e30">Storage Management</a></li>
</ul>
</li>
<li><a href="#orgf473efd">The UNIX System Interface</a>
<ul>
<li><a href="#org2c2ddde">Open, Creat, Close, Unlink</a></li>
<li><a href="#org4be1eca">Random Access - Lseek</a></li>
<li><a href="#orgfc2f1d0">Example - A Storage Allocator</a></li>
</ul>
</li>
</ul>
</div>
</nav>
<p>
&#x2014;
</p>

<p>
I mostly code in C++ and never <i>really</i> spent the time to learn the nuances of C. I recently read through [The C Programming Language](<a href="https://www.amazon.com/dp/0131103628?tag=duckduckgo-brave-20&amp;linkCode=osi&amp;th=1&amp;psc=1">https://www.amazon.com/dp/0131103628?tag=duckduckgo-brave-20&amp;linkCode=osi&amp;th=1&amp;psc=1</a>) and spent the time taking notes. Below is what I found useful and relevant. All diagrams and code snippets are from [The C Programming Language](<a href="https://www.amazon.com/dp/0131103628?tag=duckduckgo-brave-20&amp;linkCode=osi&amp;th=1&amp;psc=1">https://www.amazon.com/dp/0131103628?tag=duckduckgo-brave-20&amp;linkCode=osi&amp;th=1&amp;psc=1</a>).
</p>

<div id="outline-container-org3990e2c" class="outline-2">
<h2 id="org3990e2c">Types, Operators, and Expressions</h2>
<div class="outline-text-2" id="text-org3990e2c">
</div>
<div id="outline-container-orgb5273e4" class="outline-3">
<h3 id="orgb5273e4">Constants</h3>
<div class="outline-text-3" id="text-orgb5273e4">
<p>
A character constant is an integer, written as one character within single quotes such as &rsquo;x&rsquo;. The value of a character constant is the numeric value of the character in the machine&rsquo;s character set. For example, &rsquo;0&rsquo; has the value 48 in ASCII.
</p>

<p>
Certain characters can be expressed in character and string constants by escape sequences like `\n`. In addition, an arbitrary byte-sized bit pattern can be specified by `\ooo`, where `ooo` is one to three octal digits (0&#x2026;7) or by `\xhh` where `hh` is one or more hexadecimal digits (0..9, a&#x2026;f, A&#x2026;F). So as an example, you can write:
</p>

<div class="org-src-container">
<pre class="src src-C"><span style="color: #0000ff; font-weight: bold;">#define</span> <span style="color: #ffff00;">VTAB</span> <span style="color: #00ff00;">'\013'</span> <span style="color: #ffff00;">// </span><span style="color: #ffff00;">ASCII vertical tab</span>
<span style="color: #0000ff; font-weight: bold;">#define</span> <span style="color: #ffff00;">BELL</span> <span style="color: #00ff00;">'\007'</span> <span style="color: #ffff00;">// </span><span style="color: #ffff00;">ASCII bell character</span>
</pre>
</div>

<p>
or in hexadecimal,
</p>

<div class="org-src-container">
<pre class="src src-C"><span style="color: #0000ff; font-weight: bold;">#define</span> <span style="color: #ffff00;">VTAB</span> <span style="color: #00ff00;">'\xb'</span>  <span style="color: #ffff00;">// </span><span style="color: #ffff00;">ASCII vertical tab</span>
<span style="color: #0000ff; font-weight: bold;">#define</span> <span style="color: #ffff00;">BELL</span> <span style="color: #00ff00;">'\x7'</span>  <span style="color: #ffff00;">// </span><span style="color: #ffff00;">ASCII bell character</span>
</pre>
</div>

<p>
The complete set of escape sequences is:
</p>

<p>
#+begin<sub>example</sub>
\a       alert (bell) character
\b       backspace
\f       formfeed
\n       newline
\r       carriage return
\t       horizontal tab
\v       vertical tab
\\       backslash
\?       question mark
\′       single quote
\&ldquo;       double quote
\0	 null character
\ooo  octal number
\xhh  hexadecimal number
#+end<sub>src</sub>
</p>
</div>
</div>

<div id="outline-container-orgbdc1cd5" class="outline-3">
<h3 id="orgbdc1cd5">Increment and Decrement Operators</h3>
<div class="outline-text-3" id="text-orgbdc1cd5">
<p>
An example of when to use `++i` rather than `i++`:
</p>

<div class="org-src-container">
<pre class="src src-C"><span style="color: #ffff00;">/* </span><span style="color: #ffff00;">squeeze:  delete all c from s</span><span style="color: #ffff00;"> */</span>

<span style="color: #00ff00;">void</span> <span style="color: #0000ff; font-weight: bold;">squeeze</span><span style="color: #8c8c8c;">(</span><span style="color: #00ff00;">char</span> <span style="color: #ffff00;">s</span><span style="color: #93a8c6;">[]</span>, <span style="color: #00ff00;">int</span> <span style="color: #ffff00;">c</span><span style="color: #8c8c8c;">)</span>

<span style="color: #8c8c8c;">{</span>

    <span style="color: #00ff00;">int</span> <span style="color: #ffff00;">i</span>, <span style="color: #ffff00;">j</span>;



    <span style="color: #00ffff; font-weight: bold;">for</span> <span style="color: #93a8c6;">(</span>i = j = <span style="color: #ff00ff;">0</span>; s<span style="color: #b0b1a3;">[</span>i<span style="color: #b0b1a3;">]</span> != &#8242;\<span style="color: #ff00ff;">0</span>&#8242;; i++<span style="color: #93a8c6;">)</span>

        <span style="color: #00ffff; font-weight: bold;">if</span> <span style="color: #93a8c6;">(</span>s<span style="color: #b0b1a3;">[</span>i<span style="color: #b0b1a3;">]</span> != c<span style="color: #93a8c6;">)</span>

            s<span style="color: #93a8c6;">[</span>j++<span style="color: #93a8c6;">]</span> = s<span style="color: #93a8c6;">[</span>i<span style="color: #93a8c6;">]</span>;

    s<span style="color: #93a8c6;">[</span>j<span style="color: #93a8c6;">]</span> = &#8242;\<span style="color: #ff00ff;">0</span>&#8242;;

<span style="color: #8c8c8c;">}</span>
</pre>
</div>

<p>
This is the same code as:
</p>

<div class="org-src-container">
<pre class="src src-C"><span style="color: #00ffff; font-weight: bold;">if</span> <span style="color: #8c8c8c;">(</span>s<span style="color: #93a8c6;">[</span>i<span style="color: #93a8c6;">]</span> != c<span style="color: #8c8c8c;">)</span>
<span style="color: #8c8c8c;">{</span>

    s<span style="color: #93a8c6;">[</span>j<span style="color: #93a8c6;">]</span> = s<span style="color: #93a8c6;">[</span>i<span style="color: #93a8c6;">]</span>;

    j++;

<span style="color: #8c8c8c;">}</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfcc7d8d" class="outline-3">
<h3 id="orgfcc7d8d">Bitwise Operators</h3>
<div class="outline-text-3" id="text-orgfcc7d8d">
<p>
C provides six operators for bit manipulation; these may only be applied to integral operands, that is, `char`, `short`, `int`, and `long`, whether signed or unsigned.
</p>

<pre class="example" id="orgecb6ad2">
&amp;    bitwise AND
|    bitwise inclusive OR
^    bitwise exclusive OR
&lt;&lt;   left shift
&gt;&gt;   right shift
~    one’s complement (unary)
</pre>

<p>
`~` yield&rsquo;s one&rsquo;s compliment of an integer; that is, it converts each 1-bit into a 0-bit and vice versa.
</p>
</div>
</div>
</div>

<div id="outline-container-org546387c" class="outline-2">
<h2 id="org546387c">Control Flow</h2>
<div class="outline-text-2" id="text-org546387c">
</div>
<div id="outline-container-org86979e0" class="outline-3">
<h3 id="org86979e0">Break and Continue</h3>
<div class="outline-text-3" id="text-org86979e0">
<p>
The `break` statement provides an early exit from `for`, `while`, and `do`, just as it does from `switch`. <b><b>A `break` causes the innermost enclosing loop or switch to be exited immediately.</b></b>
</p>

<p>
The `continue` statement is related to `break`, but less often used; <b><b>it causes the next iteration of the enclosing `for`, `while`, or `do` loop to begin.</b></b> In the `while` and `do`, this means that the test part is executed immediately; in the `for`, control passes to the increment step. This statement only applies to loops, not to a `switch`.
</p>
</div>
</div>

<div id="outline-container-orgc9d37fd" class="outline-3">
<h3 id="orgc9d37fd">GoTo and Labels</h3>
<div class="outline-text-3" id="text-orgc9d37fd">
<p>
`goto` is almost never needed, but it can be useful in situations such as abandoning a process in some deeply nested structure, such as breaking out of two or more loops at once as shown below:
</p>

<div class="org-src-container">
<pre class="src src-C"><span style="color: #00ffff; font-weight: bold;">for</span> <span style="color: #8c8c8c;">(</span> ... <span style="color: #8c8c8c;">)</span>

    <span style="color: #00ffff; font-weight: bold;">for</span> <span style="color: #8c8c8c;">(</span> ... <span style="color: #8c8c8c;">)</span> <span style="color: #8c8c8c;">{</span>

        ...

        <span style="color: #00ffff; font-weight: bold;">if</span> <span style="color: #93a8c6;">(</span>disaster<span style="color: #93a8c6;">)</span>

            <span style="color: #00ffff; font-weight: bold;">goto</span> <span style="color: #ff00ff;">error</span>;

    <span style="color: #8c8c8c;">}</span>

...

error:
    <span style="color: #ffff00;">// </span><span style="color: #ffff00;">Clean up the mess</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org4b521c0" class="outline-2">
<h2 id="org4b521c0">Functions and Program Structure</h2>
<div class="outline-text-2" id="text-org4b521c0">
</div>
<div id="outline-container-orgf990b75" class="outline-3">
<h3 id="orgf990b75">Static Variables</h3>
<div class="outline-text-3" id="text-orgf990b75">
<p>
The `static` declaration, applied to an external variable or function, limits the scope of that object to the rest of the source file being compiled
</p>
</div>
</div>
</div>

<div id="outline-container-org7f7ebb7" class="outline-2">
<h2 id="org7f7ebb7">Types, Operators, and Expressions</h2>
<div class="outline-text-2" id="text-org7f7ebb7">
</div>
<div id="outline-container-orge098547" class="outline-3">
<h3 id="orge098547">Constants</h3>
<div class="outline-text-3" id="text-orge098547">
<p>
A character constant is an integer, written as one character within single quotes such as &rsquo;x&rsquo;. The value of a character constant is the numeric value of the character in the machine&rsquo;s character set. For example, &rsquo;0&rsquo; has the value 48 in ASCII.
</p>

<p>
Certain characters can be expressed in character and string constants by escape sequences like `\n`. In addition, an arbitrary byte-sized bit pattern can be specified by `\ooo`, where `ooo` is one to three octal digits (0&#x2026;7) or by `\xhh` where `hh` is one or more hexadecimal digits (0..9, a&#x2026;f, A&#x2026;F). So as an example, you can write:
</p>

<div class="org-src-container">
<pre class="src src-C"><span style="color: #0000ff; font-weight: bold;">#define</span> <span style="color: #ffff00;">VTAB</span> <span style="color: #00ff00;">'\013'</span> <span style="color: #ffff00;">// </span><span style="color: #ffff00;">ASCII vertical tab</span>
<span style="color: #0000ff; font-weight: bold;">#define</span> <span style="color: #ffff00;">BELL</span> <span style="color: #00ff00;">'\007'</span> <span style="color: #ffff00;">// </span><span style="color: #ffff00;">ASCII bell character</span>
</pre>
</div>

<p>
or in hexadecimal,
</p>

<div class="org-src-container">
<pre class="src src-C"><span style="color: #0000ff; font-weight: bold;">#define</span> <span style="color: #ffff00;">VTAB</span> <span style="color: #00ff00;">'\xb'</span>  <span style="color: #ffff00;">// </span><span style="color: #ffff00;">ASCII vertical tab</span>
<span style="color: #0000ff; font-weight: bold;">#define</span> <span style="color: #ffff00;">BELL</span> <span style="color: #00ff00;">'\x7'</span>  <span style="color: #ffff00;">// </span><span style="color: #ffff00;">ASCII bell character</span>
</pre>
</div>

<p>
The complete set of escape sequences is:
</p>

<pre class="example" id="org8434c57">
\a       alert (bell) character
\b       backspace
\f       formfeed
\n       newline
\r       carriage return
\t       horizontal tab
\v       vertical tab
\\       backslash
\?       question mark
\′       single quote
\"       double quote
\0	 null character
\ooo	 octal number
\xhh	 hexadecimal number
</pre>
</div>
</div>

<div id="outline-container-orgef71797" class="outline-3">
<h3 id="orgef71797">Increment and Decrement Operators</h3>
<div class="outline-text-3" id="text-orgef71797">
<p>
An example of when to use `++i` rather than `i++`:
</p>

<div class="org-src-container">
<pre class="src src-C"><span style="color: #ffff00;">/* </span><span style="color: #ffff00;">squeeze:  delete all c from s</span><span style="color: #ffff00;"> */</span>

<span style="color: #00ff00;">void</span> <span style="color: #0000ff; font-weight: bold;">squeeze</span><span style="color: #8c8c8c;">(</span><span style="color: #00ff00;">char</span> <span style="color: #ffff00;">s</span><span style="color: #93a8c6;">[]</span>, <span style="color: #00ff00;">int</span> <span style="color: #ffff00;">c</span><span style="color: #8c8c8c;">)</span>

<span style="color: #8c8c8c;">{</span>

    <span style="color: #00ff00;">int</span> <span style="color: #ffff00;">i</span>, <span style="color: #ffff00;">j</span>;



    <span style="color: #00ffff; font-weight: bold;">for</span> <span style="color: #93a8c6;">(</span>i = j = <span style="color: #ff00ff;">0</span>; s<span style="color: #b0b1a3;">[</span>i<span style="color: #b0b1a3;">]</span> != &#8242;\<span style="color: #ff00ff;">0</span>&#8242;; i++<span style="color: #93a8c6;">)</span>

        <span style="color: #00ffff; font-weight: bold;">if</span> <span style="color: #93a8c6;">(</span>s<span style="color: #b0b1a3;">[</span>i<span style="color: #b0b1a3;">]</span> != c<span style="color: #93a8c6;">)</span>

            s<span style="color: #93a8c6;">[</span>j++<span style="color: #93a8c6;">]</span> = s<span style="color: #93a8c6;">[</span>i<span style="color: #93a8c6;">]</span>;

    s<span style="color: #93a8c6;">[</span>j<span style="color: #93a8c6;">]</span> = &#8242;\<span style="color: #ff00ff;">0</span>&#8242;;

<span style="color: #8c8c8c;">}</span>
</pre>
</div>

<p>
This is the same code as:
</p>

<div class="org-src-container">
<pre class="src src-C"><span style="color: #00ffff; font-weight: bold;">if</span> <span style="color: #8c8c8c;">(</span>s<span style="color: #93a8c6;">[</span>i<span style="color: #93a8c6;">]</span> != c<span style="color: #8c8c8c;">)</span>
<span style="color: #8c8c8c;">{</span>

    s<span style="color: #93a8c6;">[</span>j<span style="color: #93a8c6;">]</span> = s<span style="color: #93a8c6;">[</span>i<span style="color: #93a8c6;">]</span>;

    j++;

<span style="color: #8c8c8c;">}</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org79e7245" class="outline-3">
<h3 id="org79e7245">Bitwise Operators</h3>
<div class="outline-text-3" id="text-org79e7245">
<p>
C provides six operators for bit manipulation; these may only be applied to integral operands, that is, `char`, `short`, `int`, and `long`, whether signed or unsigned.
</p>

<pre class="example" id="orgf3e8b5c">
&amp;    bitwise AND
|    bitwise inclusive OR
^    bitwise exclusive OR
&lt;&lt;   left shift
&gt;&gt;   right shift
~    one’s complement (unary)
</pre>

<p>
`~` yield&rsquo;s one&rsquo;s compliment of an integer; that is, it converts each 1-bit into a 0-bit and vice versa.
</p>
</div>
</div>
</div>

<div id="outline-container-orgfc455b0" class="outline-2">
<h2 id="orgfc455b0">Control Flow</h2>
<div class="outline-text-2" id="text-orgfc455b0">
</div>
<div id="outline-container-org62703ac" class="outline-3">
<h3 id="org62703ac">Break and Continue</h3>
<div class="outline-text-3" id="text-org62703ac">
<p>
The `break` statement provides an early exit from `for`, `while`, and `do`, just as it does from `switch`. <b><b>A `break` causes the innermost enclosing loop or switch to be exited immediately.</b></b>
</p>

<p>
The `continue` statement is related to `break`, but less often used; <b><b>it causes the next iteration of the enclosing `for`, `while`, or `do` loop to begin.</b></b> In the `while` and `do`, this means that the test part is executed immediately; in the `for`, control passes to the increment step. This statement only applies to loops, not to a `switch`.
</p>
</div>
</div>

<div id="outline-container-orge7e65ec" class="outline-3">
<h3 id="orge7e65ec">GoTo and Labels</h3>
<div class="outline-text-3" id="text-orge7e65ec">
<p>
`goto` is almost never needed, but it can be useful in situations such as abandoning a process in some deeply nested structure, such as breaking out of two or more loops at once as shown below:
</p>

<div class="org-src-container">
<pre class="src src-C"><span style="color: #00ffff; font-weight: bold;">for</span> <span style="color: #8c8c8c;">(</span> ... <span style="color: #8c8c8c;">)</span>

    <span style="color: #00ffff; font-weight: bold;">for</span> <span style="color: #8c8c8c;">(</span> ... <span style="color: #8c8c8c;">)</span> <span style="color: #8c8c8c;">{</span>

        ...

        <span style="color: #00ffff; font-weight: bold;">if</span> <span style="color: #93a8c6;">(</span>disaster<span style="color: #93a8c6;">)</span>

            <span style="color: #00ffff; font-weight: bold;">goto</span> <span style="color: #ff00ff;">error</span>;

    <span style="color: #8c8c8c;">}</span>

...

error:
    <span style="color: #ffff00;">// </span><span style="color: #ffff00;">Clean up the mess</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org70b05c0" class="outline-2">
<h2 id="org70b05c0">Functions and Program Structure</h2>
<div class="outline-text-2" id="text-org70b05c0">
</div>
<div id="outline-container-org3a7ff70" class="outline-3">
<h3 id="org3a7ff70">Static Variables</h3>
<div class="outline-text-3" id="text-org3a7ff70">
<p>
&lt;&lt;&lt;&lt;&lt;&lt;&lt; Updated upstream
The `static` declaration, applied to an external variable or function, limits the scope of that object to the rest of the source file being compiled.
<code>=====</code>
The `static` declaration, applied to an external variable or function, limits the scope of that object to the rest of the source file being compiled
</p>
</div>
</div>
</div>

<div id="outline-container-orgac22ccf" class="outline-2">
<h2 id="orgac22ccf">Pointers and Arrays</h2>
<div class="outline-text-2" id="text-orgac22ccf">
<p>
In C, there is a strong relationship between pointers and arrays. Any operation that can be achieved by array subscripting can also be done with pointers. The pointer version will generally be faster, but at least to the uninitiated, somewhat harder to understand.
</p>

<p>
If you look at an array, indexing it via `array[i]`, is the same way as indexing it via `&amp;array[0] + i`. `&amp;array[0]`, is the pointer to the first item in the array, if we have a value I added on to it, that will move down the array as shown in Figure \ref{fig:arraypointerexample}
</p>

<p>
![Using pointers to index an array \label{fig:arraypointerexample}](<img src="https://learning.oreilly.com/library/view/the-c-programming/9780133086249/graphics/98med03.jpg" alt="98med03.jpg">)
</p>

<p>
Using this line of thinking, it is possible to then pass part of an array to a function:
</p>

<div class="org-src-container">
<pre class="src src-C">foo<span style="color: #8c8c8c;">(</span>&amp;a<span style="color: #93a8c6;">[</span><span style="color: #ff00ff;">2</span><span style="color: #93a8c6;">]</span><span style="color: #8c8c8c;">)</span>;
<span style="color: #ffff00;">// </span><span style="color: #ffff00;">or</span>
<span style="color: #0000ff; font-weight: bold;">foo</span><span style="color: #8c8c8c;">(</span>a+<span style="color: #ff00ff;">2</span><span style="color: #8c8c8c;">)</span>;
</pre>
</div>

<p>
Where the function `foo`&rsquo;s arguments have the form of:
</p>

<div class="org-src-container">
<pre class="src src-C"><span style="color: #0000ff; font-weight: bold;">foo</span><span style="color: #8c8c8c;">(</span><span style="color: #00ff00;">int</span> <span style="color: #ffff00;">arr</span><span style="color: #93a8c6;">[]</span><span style="color: #8c8c8c;">)</span> <span style="color: #8c8c8c;">{</span>...<span style="color: #8c8c8c;">}</span>
<span style="color: #ffff00;">// </span><span style="color: #ffff00;">or</span>
<span style="color: #0000ff; font-weight: bold;">fo</span><span style="color: #8c8c8c;">(</span><span style="color: #00ff00;">int</span>* <span style="color: #ffff00;">arr</span><span style="color: #8c8c8c;">)</span> <span style="color: #8c8c8c;">{</span>...<span style="color: #8c8c8c;">}</span>
</pre>
</div>

<p>
As far as `foo` is concerned, the fact that the parameter refers to part of a larger array is of no consequence.
</p>
</div>

<div id="outline-container-org5b331c7" class="outline-3">
<h3 id="org5b331c7">Address Arithmetic</h3>
<div class="outline-text-3" id="text-org5b331c7">
<p>
Because memory is allocated sequentially, we can use mathematical comparisons to see if we have enough memory allocated in a buffer, to see a position of a value in an array, etc. For example:
</p>

<div class="org-src-container">
<pre class="src src-C"><span style="color: #00ffff; font-weight: bold;">if</span> <span style="color: #8c8c8c;">(</span>allocbuf + <span style="color: #ff00ff;">ALLOCSIZE</span> - allocp &gt;= n<span style="color: #8c8c8c;">)</span>     <span style="color: #ffff00;">// </span><span style="color: #ffff00;">Checks if the buffer is large enough</span>
<span style="color: #ffff00;">// </span><span style="color: #ffff00;">or</span>
<span style="color: #00ffff; font-weight: bold;">if</span> <span style="color: #8c8c8c;">(</span>p &gt;= allocbuf &amp;&amp; p &lt; allocbuf + <span style="color: #ff00ff;">ALLOCSIZE</span><span style="color: #8c8c8c;">)</span>  <span style="color: #ffff00;">// </span><span style="color: #ffff00;">Checks if the pointer is within the buffer range</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org7e4f7ad" class="outline-3">
<h3 id="org7e4f7ad">Character Pointers and Functions</h3>
<div class="outline-text-3" id="text-org7e4f7ad">
<p>
A string constant is written as `&ldquo;I am a string&rdquo;`. It is represented as an array of characters and is terminated with a `\0`.
</p>

<p>
When a character string appears, it is accessed through a character pointer. For example
</p>

<div class="org-src-container">
<pre class="src src-C">printf<span style="color: #8c8c8c;">(</span><span style="color: #00ff00;">"Hello, World!\n"</span><span style="color: #8c8c8c;">)</span>;
</pre>
</div>

<p>
takes the pointer of the start of the character string.
</p>

<p>
If you declare a character pointer as follows:
</p>

<div class="org-src-container">
<pre class="src src-C"><span style="color: #00ff00;">char</span>* <span style="color: #ffff00;">pmessage</span>;
</pre>
</div>

<p>
then the statement
</p>

<div class="org-src-container">
<pre class="src src-C">pmessage = <span style="color: #00ff00;">"Hello, World!"</span>;
</pre>
</div>

<p>
Assigns `pmessage` to the &ldquo;Hello, World!&rdquo;. This is <b>not</b> a copy; only pointers are involved. C does not provide any operators for processing an entire string of characters as a unit.
</p>
</div>
</div>

<div id="outline-container-org90179c8" class="outline-3">
<h3 id="org90179c8">Pointer Arrays; Pointers to Pointers</h3>
<div class="outline-text-3" id="text-org90179c8">
<p>
To create an array of pointers, we can say:
</p>

<pre class="example" id="org244710e">
char* lineptr[10];	// Array of character pointers
</pre>
</div>
</div>

<div id="outline-container-org232f73a" class="outline-3">
<h3 id="org232f73a">Multi-Dimensional Arrays</h3>
<div class="outline-text-3" id="text-org232f73a">
<p>
C provides rectangular multi-dimensional arrays, although in practice they are much less used than arrays of pointers.
</p>

<p>
**If a two-dimensional array is to be passed to a function, the parameter declaration in the function must include the number of columns; the number of rows is irrelevant, since what is passed is, as before, a pointer to an array of rows.
</p>

<div class="org-src-container">
<pre class="src src-C">foo <span style="color: #8c8c8c;">(</span><span style="color: #00ff00;">int</span> <span style="color: #ffff00;">daytab</span><span style="color: #93a8c6;">[</span><span style="color: #ff00ff;">2</span><span style="color: #93a8c6;">][</span><span style="color: #ff00ff;">13</span><span style="color: #93a8c6;">]</span> <span style="color: #93a8c6;">{</span>...<span style="color: #93a8c6;">}</span>
<span style="color: #ffff00;">// </span><span style="color: #ffff00;">or</span>
foo <span style="color: #93a8c6;">(</span><span style="color: #00ff00;">int</span> <span style="color: #ffff00;">daytab</span><span style="color: #b0b1a3;">[][</span><span style="color: #ff00ff;">13</span><span style="color: #b0b1a3;">]</span> <span style="color: #b0b1a3;">{</span>...<span style="color: #b0b1a3;">}</span>
<span style="color: #ffff00;">// </span><span style="color: #ffff00;">or</span>
foo <span style="color: #b0b1a3;">(</span><span style="color: #00ff00;">int</span> <span style="color: #8c8c8c;">(</span>*<span style="color: #ffff00;">daytab</span><span style="color: #8c8c8c;">)[</span><span style="color: #ff00ff;">13</span><span style="color: #8c8c8c;">]</span> <span style="color: #8c8c8c;">{</span>...<span style="color: #8c8c8c;">}</span>
</pre>
</div>
<p>
It is necessary to have the parenthesis in the last version since brackets `[]` have higher precedence than *. Without the parenthesis
</p>

<div class="org-src-container">
<pre class="src src-C"><span style="color: #00ff00;">int</span>* <span style="color: #ffff00;">daytab</span><span style="color: #8c8c8c;">[</span><span style="color: #ff00ff;">13</span><span style="color: #8c8c8c;">]</span>
</pre>
</div>

<p>
is an array of 13 pointers to integers. More generally, only the first dimension of an array is free; all others have to be specified.
</p>
</div>
</div>

<div id="outline-container-org5d1c578" class="outline-3">
<h3 id="org5d1c578">Initialization of Pointer Arrays</h3>
<div class="outline-text-3" id="text-org5d1c578">
<div class="org-src-container">
<pre class="src src-C"><span style="color: #00ff00;">char</span>* <span style="color: #ffff00;">array_of_pointers</span><span style="color: #8c8c8c;">[]</span> =
<span style="color: #8c8c8c;">{</span>
    <span style="color: #00ff00;">"Item 1"</span>,
    <span style="color: #00ff00;">"Item 2"</span>,
    ...
<span style="color: #8c8c8c;">}</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org94450c6" class="outline-3">
<h3 id="org94450c6">Pointers vs. Multi-Dimensional Array</h3>
<div class="outline-text-3" id="text-org94450c6">
<p>
The big difference between
</p>

<div class="org-src-container">
<pre class="src src-C"><span style="color: #00ff00;">int</span> <span style="color: #ffff00;">a</span><span style="color: #8c8c8c;">[</span><span style="color: #ff00ff;">10</span><span style="color: #8c8c8c;">][</span><span style="color: #ff00ff;">20</span><span style="color: #8c8c8c;">]</span>;
<span style="color: #ffff00;">// </span><span style="color: #ffff00;">and</span>
<span style="color: #00ff00;">int</span>* <span style="color: #ffff00;">b</span><span style="color: #8c8c8c;">[</span><span style="color: #ff00ff;">10</span><span style="color: #8c8c8c;">]</span>;
</pre>
</div>

<p>
Is that the first one allocates all 10x20 array, the second only allocates 10 integer pointers. Initialization must be done explicitly either statically or with code. The important advantage of the pointer array is that the rows of the array may be of different lengths.
</p>
</div>
</div>

<div id="outline-container-org72136b8" class="outline-3">
<h3 id="org72136b8">Command Line Arguments</h3>
<div class="outline-text-3" id="text-org72136b8">
<p>
When `main` is called, it is called with two arguments. The first (conventionally called `argc` for argument count) is the number of command-line arguments. The second (`argv`, for argument vector), is a pointer to an array of character strings that contain the arguments, one per string. We customarily use multiple levels of pointers to manipulate these character strings.
</p>
</div>

<div id="outline-container-org02f01d3" class="outline-4">
<h4 id="org02f01d3">Accepting Command Line Flags</h4>
<div class="outline-text-4" id="text-org02f01d3">
<div class="org-src-container">
<pre class="src src-C"><span style="color: #0000ff; font-weight: bold;">#include</span> <span style="color: #8c8c8c;">&lt;</span><span style="color: #00ff00;">stdio.h</span><span style="color: #8c8c8c;">&gt;</span>

<span style="color: #0000ff; font-weight: bold;">#include</span> <span style="color: #8c8c8c;">&lt;</span><span style="color: #00ff00;">string.h</span><span style="color: #8c8c8c;">&gt;</span>

<span style="color: #0000ff; font-weight: bold;">#define</span> <span style="color: #ffff00;">MAXLINE</span> <span style="color: #ff00ff;">1000</span>



<span style="color: #00ff00;">int</span> <span style="color: #0000ff; font-weight: bold;">getline</span><span style="color: #8c8c8c;">(</span><span style="color: #00ff00;">char</span> *<span style="color: #ffff00;">line</span>, <span style="color: #00ff00;">int</span> <span style="color: #ffff00;">max</span><span style="color: #8c8c8c;">)</span>;



<span style="color: #ffff00;">/* </span><span style="color: #ffff00;">find:  print lines that match pattern from 1st arg</span><span style="color: #ffff00;"> */</span>

<span style="color: #0000ff; font-weight: bold;">main</span><span style="color: #8c8c8c;">(</span><span style="color: #00ff00;">int</span> <span style="color: #ffff00;">argc</span>, <span style="color: #00ff00;">char</span> *<span style="color: #ffff00;">argv</span><span style="color: #93a8c6;">[]</span><span style="color: #8c8c8c;">)</span>

<span style="color: #8c8c8c;">{</span>

    <span style="color: #00ff00;">char</span> <span style="color: #ffff00;">line</span><span style="color: #93a8c6;">[</span><span style="color: #ff00ff;">MAXLINE</span><span style="color: #93a8c6;">]</span>;

    <span style="color: #00ff00;">long</span> <span style="color: #ffff00;">lineno</span> = <span style="color: #ff00ff;">0</span>;

    <span style="color: #00ff00;">int</span> <span style="color: #ffff00;">c</span>, <span style="color: #ffff00;">except</span> = <span style="color: #ff00ff;">0</span>, <span style="color: #ffff00;">number</span> = <span style="color: #ff00ff;">0</span>, <span style="color: #ffff00;">found</span> = <span style="color: #ff00ff;">0</span>;



    <span style="color: #00ffff; font-weight: bold;">while</span> <span style="color: #93a8c6;">(</span>--argc &gt; <span style="color: #ff00ff;">0</span> &amp;&amp; <span style="color: #b0b1a3;">(</span>*++argv<span style="color: #b0b1a3;">)[</span><span style="color: #ff00ff;">0</span><span style="color: #b0b1a3;">]</span> == &#8242;-&#8242;<span style="color: #93a8c6;">)</span>

        <span style="color: #00ffff; font-weight: bold;">while</span> <span style="color: #93a8c6;">(</span>c = *++argv<span style="color: #b0b1a3;">[</span><span style="color: #ff00ff;">0</span><span style="color: #b0b1a3;">]</span><span style="color: #93a8c6;">)</span>

            <span style="color: #00ffff; font-weight: bold;">switch</span> <span style="color: #93a8c6;">(</span>c<span style="color: #93a8c6;">)</span> <span style="color: #93a8c6;">{</span>

            <span style="color: #00ffff; font-weight: bold;">case</span> &#8242;x&#8242;:

                except = <span style="color: #ff00ff;">1</span>;

                <span style="color: #00ffff; font-weight: bold;">break</span>;

            <span style="color: #00ffff; font-weight: bold;">case</span> &#8242;n&#8242;:

                number = <span style="color: #ff00ff;">1</span>;

                <span style="color: #00ffff; font-weight: bold;">break</span>;

            <span style="color: #00ffff; font-weight: bold;">default</span>:

                printf<span style="color: #b0b1a3;">(</span><span style="color: #00ff00;">"find: illegal option %c\n"</span>, c<span style="color: #b0b1a3;">)</span>;

                argc = <span style="color: #ff00ff;">0</span>;

                found = &#8722;<span style="color: #ff00ff;">1</span>;

                <span style="color: #00ffff; font-weight: bold;">break</span>;

            <span style="color: #93a8c6;">}</span>

    <span style="color: #00ffff; font-weight: bold;">if</span> <span style="color: #93a8c6;">(</span>argc != <span style="color: #ff00ff;">1</span><span style="color: #93a8c6;">)</span>

        printf<span style="color: #93a8c6;">(</span><span style="color: #00ff00;">"Usage: find -x -n pattern\n"</span><span style="color: #93a8c6;">)</span>;

    <span style="color: #00ffff; font-weight: bold;">else</span>

        <span style="color: #00ffff; font-weight: bold;">while</span> <span style="color: #93a8c6;">(</span>getline<span style="color: #b0b1a3;">(</span>line, <span style="color: #ff00ff;">MAXLINE</span><span style="color: #b0b1a3;">)</span> &gt; <span style="color: #ff00ff;">0</span><span style="color: #93a8c6;">)</span> <span style="color: #93a8c6;">{</span>

            lineno++;

            <span style="color: #00ffff; font-weight: bold;">if</span> <span style="color: #b0b1a3;">(</span><span style="color: #8c8c8c;">(</span>strstr<span style="color: #93a8c6;">(</span>line, *argv<span style="color: #93a8c6;">)</span> != <span style="color: #ff00ff;">NULL</span><span style="color: #8c8c8c;">)</span> != except<span style="color: #b0b1a3;">)</span> <span style="color: #b0b1a3;">{</span>

                <span style="color: #00ffff; font-weight: bold;">if</span> <span style="color: #8c8c8c;">(</span>number<span style="color: #8c8c8c;">)</span>

                    printf<span style="color: #8c8c8c;">(</span><span style="color: #00ff00;">"%ld:"</span>, lineno<span style="color: #8c8c8c;">)</span>;

                printf<span style="color: #8c8c8c;">(</span><span style="color: #00ff00;">"%s"</span>, line<span style="color: #8c8c8c;">)</span>;

                found++;

            <span style="color: #b0b1a3;">}</span>

        <span style="color: #93a8c6;">}</span>

    <span style="color: #00ffff; font-weight: bold;">return</span> found;

<span style="color: #8c8c8c;">}</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org37e0a30" class="outline-3">
<h3 id="org37e0a30">Pointers To Functions</h3>
<div class="outline-text-3" id="text-org37e0a30">
<p>
In C, it is possible to define pointers to functions which can be assigned, placed in arrays, passed to functions, returned by functions, and so on.
</p>

<p>
The generic `void*` is used for pointer arguments. Any pointer can be cast to `void*` and back again without loss of information.
</p>

<p>
When creating a function that accepts function pointers:
</p>

<div class="org-src-container">
<pre class="src src-C"><span style="color: #00ff00;">void</span> <span style="color: #0000ff; font-weight: bold;">qsort</span> <span style="color: #8c8c8c;">(</span><span style="color: #00ff00;">void</span>* <span style="color: #ffff00;">v</span><span style="color: #93a8c6;">[]</span>, <span style="color: #00ff00;">int</span> <span style="color: #ffff00;">left</span>, <span style="color: #00ff00;">int</span> <span style="color: #ffff00;">right</span>, <span style="color: #00ff00;">int</span> <span style="color: #93a8c6;">(</span>*<span style="color: #0000ff; font-weight: bold;">comp</span><span style="color: #93a8c6;">)(</span><span style="color: #00ff00;">void</span>*, <span style="color: #00ff00;">void</span>*<span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>
</pre>
</div>

<p>
Says that `comp` is a pointer to a function that has two `void*` as arguments.
</p>
</div>
</div>

<div id="outline-container-org3d1e9a1" class="outline-3">
<h3 id="org3d1e9a1">Complicated Declarations</h3>
<div class="outline-text-3" id="text-org3d1e9a1">
<div class="org-src-container">
<pre class="src src-C"><span style="color: #00ff00;">char</span> **<span style="color: #0000ff; font-weight: bold;">argv</span>

    argv:  pointer to pointer to <span style="color: #00ff00;">char</span>

<span style="color: #00ff00;">int</span> <span style="color: #8c8c8c;">(</span>*daytab<span style="color: #8c8c8c;">)[</span><span style="color: #ff00ff;">13</span><span style="color: #8c8c8c;">]</span>

    daytab:  pointer to array<span style="color: #8c8c8c;">[</span><span style="color: #ff00ff;">13</span><span style="color: #8c8c8c;">]</span> of <span style="color: #00ff00;">int</span>

<span style="color: #00ff00;">int</span> *daytab<span style="color: #8c8c8c;">[</span><span style="color: #ff00ff;">13</span><span style="color: #8c8c8c;">]</span>

    daytab:  array<span style="color: #8c8c8c;">[</span><span style="color: #ff00ff;">13</span><span style="color: #8c8c8c;">]</span> of pointer to <span style="color: #00ff00;">int</span>

<span style="color: #00ff00;">void</span> *comp<span style="color: #8c8c8c;">()</span>

    comp:  function returning pointer to <span style="color: #00ff00;">void</span>

<span style="color: #00ff00;">void</span> <span style="color: #8c8c8c;">(</span>*comp<span style="color: #8c8c8c;">)()</span>

    comp:  pointer to function returning <span style="color: #00ff00;">void</span>

<span style="color: #00ff00;">char</span> <span style="color: #8c8c8c;">(</span>*<span style="color: #93a8c6;">(</span>*x<span style="color: #b0b1a3;">()</span><span style="color: #93a8c6;">)[]</span><span style="color: #8c8c8c;">)()</span>

    x: function returning pointer to array<span style="color: #8c8c8c;">[]</span> of

    pointer to function returning <span style="color: #00ff00;">char</span>

<span style="color: #00ff00;">char</span> <span style="color: #8c8c8c;">(</span>*<span style="color: #93a8c6;">(</span>*x<span style="color: #b0b1a3;">[</span><span style="color: #ff00ff;">3</span><span style="color: #b0b1a3;">]</span><span style="color: #93a8c6;">)()</span><span style="color: #8c8c8c;">)[</span><span style="color: #ff00ff;">5</span><span style="color: #8c8c8c;">]</span>

    x: array<span style="color: #8c8c8c;">[</span><span style="color: #ff00ff;">3</span><span style="color: #8c8c8c;">]</span> of pointer to function returning

    pointer to array<span style="color: #8c8c8c;">[</span><span style="color: #ff00ff;">5</span><span style="color: #8c8c8c;">]</span> of <span style="color: #00ff00;">char</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orga6de34c" class="outline-2">
<h2 id="orga6de34c">Structures</h2>
<div class="outline-text-2" id="text-orga6de34c">
<p>
A `struct` declaration defines a type. The right brace that terminates the list of members may be followed by a list of variables, just as for any basic type. That is,
</p>

<div class="org-src-container">
<pre class="src src-C"><span style="color: #00ffff; font-weight: bold;">struct</span> <span style="color: #8c8c8c;">{</span>...<span style="color: #8c8c8c;">}</span> <span style="color: #ffff00;">x</span>, <span style="color: #ffff00;">y</span>, <span style="color: #ffff00;">z</span>;
</pre>
</div>

<p>
A structure declaration that is not followed by  a list of variables reserves no storage; it merely describes a template or the shape of a structure. If the declaration is tagged, however; the tag can be used later in definitions of instances of the structure. For example:
</p>

<div class="org-src-container">
<pre class="src src-C"><span style="color: #00ffff; font-weight: bold;">struct</span> <span style="color: #00ff00;">point</span> <span style="color: #ffff00;">pt</span>;
</pre>
</div>

<p>
Is analogous to `int c`.
</p>
</div>

<div id="outline-container-org68af864" class="outline-3">
<h3 id="org68af864">Arrays of Structures</h3>
<div class="outline-text-3" id="text-org68af864">
<p>
When defining an array of structures, it is acceptable to define it in the following manner:
</p>

<div class="org-src-container">
<pre class="src src-C"><span style="color: #00ffff; font-weight: bold;">struct</span> <span style="color: #00ff00;">key</span> <span style="color: #8c8c8c;">{</span>

    <span style="color: #00ff00;">char</span> *<span style="color: #ffff00;">word</span>;

    <span style="color: #00ff00;">int</span> <span style="color: #ffff00;">count</span>;

<span style="color: #8c8c8c;">}</span> <span style="color: #ffff00;">keytab</span><span style="color: #8c8c8c;">[]</span> = <span style="color: #8c8c8c;">{</span>

    <span style="color: #00ff00;">"auto"</span>, <span style="color: #ff00ff;">0</span>,

    <span style="color: #00ff00;">"break"</span>, <span style="color: #ff00ff;">0</span>,

    <span style="color: #00ff00;">"case"</span>, <span style="color: #ff00ff;">0</span>,

    <span style="color: #00ff00;">"char"</span>, <span style="color: #ff00ff;">0</span>,

    <span style="color: #00ff00;">"const"</span>, <span style="color: #ff00ff;">0</span>,

    <span style="color: #00ff00;">"continue"</span>, <span style="color: #ff00ff;">0</span>,

    <span style="color: #00ff00;">"default"</span>, <span style="color: #ff00ff;">0</span>,

    <span style="color: #ffff00;">/* </span><span style="color: #ffff00;">...</span><span style="color: #ffff00;"> */</span>

    <span style="color: #00ff00;">"unsigned"</span>, <span style="color: #ff00ff;">0</span>,

    <span style="color: #00ff00;">"void"</span>, <span style="color: #ff00ff;">0</span>,

    <span style="color: #00ff00;">"volatile"</span>, <span style="color: #ff00ff;">0</span>,

    <span style="color: #00ff00;">"while"</span>, <span style="color: #ff00ff;">0</span>

<span style="color: #8c8c8c;">}</span>;
</pre>
</div>

<p>
However, it is more precise to enclose the initializers for each &ldquo;row&rdquo; or structure in braces:
</p>

<div class="org-src-container">
<pre class="src src-C"> <span style="color: #8c8c8c;">{</span> <span style="color: #00ff00;">"auto"</span>, <span style="color: #ff00ff;">0</span> <span style="color: #8c8c8c;">}</span>,

 <span style="color: #8c8c8c;">{</span> <span style="color: #00ff00;">"break"</span>, <span style="color: #ff00ff;">0</span> <span style="color: #8c8c8c;">}</span>,

 <span style="color: #8c8c8c;">{</span> <span style="color: #00ff00;">"case"</span>, <span style="color: #ff00ff;">0</span> <span style="color: #8c8c8c;">}</span>,

...
</pre>
</div>
</div>
</div>

<div id="outline-container-org85040a5" class="outline-3">
<h3 id="org85040a5">Table Lookup</h3>
<div class="outline-text-3" id="text-org85040a5">
<p>
This section will be about writing the innards of a table-lookup package.
</p>

<p>
There are two routines that manipulate the names and replace texts. `install(s,t)` records the name s and the replacement text `t` in a table; `s` and `t` are just character strings. `lookup(s)` searches for `s` in the table, and returns a pointer to the place where it was found, or `NULL` if it wasn&rsquo;t there.
</p>

<p>
The algorithm is a hash search—the incoming name is converted into a small non-negative integer, which is then used to index into an array of pointers. An array element points to the beginning of a linked list of blocks describing names that have that hash value. It is NULL if no names have hashed to that value.
</p>

<p>
This is shown in Figure \ref{fig:hashtable}.
</p>

<p>
![Diagram of table lookup \label{fig:hashtable}](<img src="https://learning.oreilly.com/library/view/the-c-programming/9780133086249/graphics/f0144_01.jpg" alt="f0144_01.jpg">)
</p>

<p>
A block in the list is a structure containing pointers to the name, the replacement text, and the next blocks in the list. A `NULL` next-pointer marks the end of the list.
</p>

<div class="org-src-container">
<pre class="src src-C"><span style="color: #00ffff; font-weight: bold;">struct</span> <span style="color: #00ff00;">nlist</span> <span style="color: #8c8c8c;">{</span>       <span style="color: #ffff00;">/* </span><span style="color: #ffff00;">table entry:</span><span style="color: #ffff00;"> */</span>

    <span style="color: #00ffff; font-weight: bold;">struct</span> <span style="color: #00ff00;">nlist</span> *<span style="color: #ffff00;">next</span>;   <span style="color: #ffff00;">/* </span><span style="color: #ffff00;">next entry in chain</span><span style="color: #ffff00;"> */</span>

    <span style="color: #00ff00;">char</span> *<span style="color: #ffff00;">name</span>;           <span style="color: #ffff00;">/* </span><span style="color: #ffff00;">defined name</span><span style="color: #ffff00;"> */</span>

    <span style="color: #00ff00;">char</span> *<span style="color: #ffff00;">defn</span>;           <span style="color: #ffff00;">/* </span><span style="color: #ffff00;">replacement text</span><span style="color: #ffff00;"> */</span>

<span style="color: #8c8c8c;">}</span>;
</pre>
</div>

<p>
The pointer array is just
</p>

<div class="org-src-container">
<pre class="src src-C"><span style="color: #0000ff; font-weight: bold;">#define</span> <span style="color: #ffff00;">HASHSIZE</span> <span style="color: #ff00ff;">101</span>

<span style="color: #00ffff; font-weight: bold;">static</span> <span style="color: #00ffff; font-weight: bold;">struct</span> <span style="color: #00ff00;">nlist</span> *<span style="color: #ffff00;">hashtab</span><span style="color: #8c8c8c;">[</span><span style="color: #ff00ff;">HASHSIZE</span><span style="color: #8c8c8c;">]</span>;    <span style="color: #ffff00;">/* </span><span style="color: #ffff00;">pointer table</span><span style="color: #ffff00;"> */</span>
</pre>
</div>

<p>
The hashing function, which is used by both `lookup` and `install`, adds each character value in the string to a scrambled combination of the previous ones and returns the remainder modulo the array size.
</p>

<div class="org-src-container">
<pre class="src src-C"><span style="color: #ffff00;">/* </span><span style="color: #ffff00;">hash:  form hash value for string s</span><span style="color: #ffff00;"> */</span>

<span style="color: #00ff00;">unsigned</span> <span style="color: #0000ff; font-weight: bold;">hash</span><span style="color: #8c8c8c;">(</span><span style="color: #00ff00;">char</span> *<span style="color: #ffff00;">s</span><span style="color: #8c8c8c;">)</span>

<span style="color: #8c8c8c;">{</span>

    <span style="color: #00ff00;">unsigned</span> <span style="color: #ffff00;">hashval</span>;



    <span style="color: #00ffff; font-weight: bold;">for</span> <span style="color: #93a8c6;">(</span>hashval = <span style="color: #ff00ff;">0</span>; *s != &#8242;\<span style="color: #ff00ff;">0</span>&#8242;; s++<span style="color: #93a8c6;">)</span>

        hashval = *s + <span style="color: #ff00ff;">31</span> * hashval;

    <span style="color: #00ffff; font-weight: bold;">return</span> hashval % <span style="color: #ff00ff;">HASHSIZE</span>;

<span style="color: #8c8c8c;">}</span>
</pre>
</div>

<p>
The reason we return `hashval % HASHSIZE` is because `hastab` only has a size of `HASHSIZE`. In this particular instance, the hash is placing the item in a arbitrary position from 0 to `HASHSIZE` - 1.
</p>

<p>
The hashing process produces a staring index in the array `hashtab`; if the string is to be found anywhere, it will be int he list of blocks beginning there. By this, it is meant that if there is a collision in the hashing, a list will be produced at that hash from which the for loop will search for the string name.
</p>

<div class="org-src-container">
<pre class="src src-C"><span style="color: #ffff00;">/* </span><span style="color: #ffff00;">lookup:  look for s in hashtab</span><span style="color: #ffff00;"> */</span>

<span style="color: #00ffff; font-weight: bold;">struct</span> <span style="color: #00ff00;">nlist</span> *<span style="color: #0000ff; font-weight: bold;">lookup</span><span style="color: #8c8c8c;">(</span><span style="color: #00ff00;">char</span> *<span style="color: #ffff00;">s</span><span style="color: #8c8c8c;">)</span>

<span style="color: #8c8c8c;">{</span>

    <span style="color: #00ffff; font-weight: bold;">struct</span> <span style="color: #00ff00;">nlist</span> *<span style="color: #ffff00;">np</span>;



    <span style="color: #00ffff; font-weight: bold;">for</span> <span style="color: #93a8c6;">(</span>np = hashtab<span style="color: #b0b1a3;">[</span>hash<span style="color: #8c8c8c;">(</span>s<span style="color: #8c8c8c;">)</span><span style="color: #b0b1a3;">]</span>; np != <span style="color: #ff00ff;">NULL</span>; np = np-&gt;next<span style="color: #93a8c6;">)</span>

        <span style="color: #00ffff; font-weight: bold;">if</span> <span style="color: #93a8c6;">(</span>strcmp<span style="color: #b0b1a3;">(</span>s, np-&gt;name<span style="color: #b0b1a3;">)</span> == <span style="color: #ff00ff;">0</span><span style="color: #93a8c6;">)</span>

            <span style="color: #00ffff; font-weight: bold;">return</span> np;  <span style="color: #ffff00;">/* </span><span style="color: #ffff00;">found</span><span style="color: #ffff00;"> */</span>

    <span style="color: #00ffff; font-weight: bold;">return</span> <span style="color: #ff00ff;">NULL</span>;        <span style="color: #ffff00;">/* </span><span style="color: #ffff00;">not found</span><span style="color: #ffff00;"> */</span>

<span style="color: #8c8c8c;">}</span>
</pre>
</div>

<p>
`install` returns a `NULL` if for any reason there is no room for a new entry.
</p>

<div class="org-src-container">
<pre class="src src-C"><span style="color: #00ffff; font-weight: bold;">struct</span> <span style="color: #00ff00;">nlist</span> *<span style="color: #0000ff; font-weight: bold;">lookup</span><span style="color: #8c8c8c;">(</span><span style="color: #00ff00;">char</span> *<span style="color: #8c8c8c;">)</span>;

<span style="color: #00ff00;">char</span> *<span style="color: #0000ff; font-weight: bold;">strdup</span><span style="color: #8c8c8c;">(</span><span style="color: #00ff00;">char</span> *<span style="color: #8c8c8c;">)</span>;



<span style="color: #ffff00;">/* </span><span style="color: #ffff00;">install:  put (name, defn) in hashtab</span><span style="color: #ffff00;"> */</span>

<span style="color: #00ffff; font-weight: bold;">struct</span> <span style="color: #00ff00;">nlist</span> *<span style="color: #0000ff; font-weight: bold;">install</span><span style="color: #8c8c8c;">(</span><span style="color: #00ff00;">char</span> *<span style="color: #ffff00;">name</span>, <span style="color: #00ff00;">char</span> *<span style="color: #ffff00;">defn</span><span style="color: #8c8c8c;">)</span>

<span style="color: #8c8c8c;">{</span>

    <span style="color: #00ffff; font-weight: bold;">struct</span> <span style="color: #00ff00;">nlist</span> *<span style="color: #ffff00;">np</span>;

    <span style="color: #00ff00;">unsigned</span> <span style="color: #ffff00;">hashval</span>;



    <span style="color: #00ffff; font-weight: bold;">if</span> <span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span>np = lookup<span style="color: #8c8c8c;">(</span>name<span style="color: #8c8c8c;">)</span><span style="color: #b0b1a3;">)</span> == <span style="color: #ff00ff;">NULL</span><span style="color: #93a8c6;">)</span> <span style="color: #93a8c6;">{</span>  <span style="color: #ffff00;">/* </span><span style="color: #ffff00;">not found</span><span style="color: #ffff00;"> */</span>

        np = <span style="color: #b0b1a3;">(</span><span style="color: #00ffff; font-weight: bold;">struct</span> <span style="color: #00ff00;">nlist</span> *<span style="color: #b0b1a3;">)</span> malloc<span style="color: #b0b1a3;">(</span><span style="color: #00ffff; font-weight: bold;">sizeof</span><span style="color: #8c8c8c;">(</span>*np<span style="color: #8c8c8c;">)</span><span style="color: #b0b1a3;">)</span>;

        <span style="color: #00ffff; font-weight: bold;">if</span> <span style="color: #b0b1a3;">(</span>np == <span style="color: #ff00ff;">NULL</span> &#166;&#166; <span style="color: #8c8c8c;">(</span>np-&gt;name = strdup<span style="color: #93a8c6;">(</span>name<span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span> == <span style="color: #ff00ff;">NULL</span><span style="color: #b0b1a3;">)</span>

            <span style="color: #00ffff; font-weight: bold;">return</span> <span style="color: #ff00ff;">NULL</span>;

        hashval = hash<span style="color: #b0b1a3;">(</span>name<span style="color: #b0b1a3;">)</span>;

        np-&gt;next = hashtab<span style="color: #b0b1a3;">[</span>hashval<span style="color: #b0b1a3;">]</span>;

        hashtab<span style="color: #b0b1a3;">[</span>hashval<span style="color: #b0b1a3;">]</span> = np;

    <span style="color: #93a8c6;">}</span> <span style="color: #00ffff; font-weight: bold;">else</span>      <span style="color: #ffff00;">/* </span><span style="color: #ffff00;">already there</span><span style="color: #ffff00;"> */</span>

        free<span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span><span style="color: #00ff00;">void</span> *<span style="color: #b0b1a3;">)</span> np-&gt;defn<span style="color: #93a8c6;">)</span>;  <span style="color: #ffff00;">/* </span><span style="color: #ffff00;">free previous defn</span><span style="color: #ffff00;"> */</span>

    <span style="color: #00ffff; font-weight: bold;">if</span> <span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span>np-&gt;defn = strdup<span style="color: #8c8c8c;">(</span>defn<span style="color: #8c8c8c;">)</span><span style="color: #b0b1a3;">)</span> == <span style="color: #ff00ff;">NULL</span><span style="color: #93a8c6;">)</span>

        <span style="color: #00ffff; font-weight: bold;">return</span> <span style="color: #ff00ff;">NULL</span>;

    <span style="color: #00ffff; font-weight: bold;">return</span> np;

<span style="color: #8c8c8c;">}</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org89e7116" class="outline-2">
<h2 id="org89e7116">Input and Output</h2>
<div class="outline-text-2" id="text-org89e7116">
</div>
<div id="outline-container-orgf7771d7" class="outline-3">
<h3 id="orgf7771d7">Command Execution</h3>
<div class="outline-text-3" id="text-orgf7771d7">
<p>
The function `system(char* s)` executes the commands contained in the character string `s`, then resumes execution of the current program.
</p>

<div class="org-src-container">
<pre class="src src-C">system<span style="color: #8c8c8c;">(</span><span style="color: #00ff00;">"date"</span><span style="color: #8c8c8c;">)</span>;
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc004e30" class="outline-3">
<h3 id="orgc004e30">Storage Management</h3>
<div class="outline-text-3" id="text-orgc004e30">
<div class="org-src-container">
<pre class="src src-C"><span style="color: #00ff00;">void</span>* <span style="color: #0000ff; font-weight: bold;">malloc</span><span style="color: #8c8c8c;">(</span><span style="color: #00ff00;">size_t</span> <span style="color: #ffff00;">n</span><span style="color: #8c8c8c;">)</span>; <span style="color: #ffff00;">// </span><span style="color: #ffff00;">returns a pointer to n bytes of uninitialized storage</span>
<span style="color: #00ff00;">void</span>* <span style="color: #0000ff; font-weight: bold;">calloc</span><span style="color: #8c8c8c;">(</span><span style="color: #00ff00;">size_t</span> <span style="color: #ffff00;">n</span>, <span style="color: #00ff00;">size_t</span> <span style="color: #ffff00;">size</span><span style="color: #8c8c8c;">)</span>; <span style="color: #ffff00;">// </span><span style="color: #ffff00;">returns a pointer to enough space for an array of n objects of the specified size. </span>
<span style="color: #0000ff; font-weight: bold;">free</span><span style="color: #8c8c8c;">(</span>p<span style="color: #8c8c8c;">)</span>; <span style="color: #ffff00;">// </span><span style="color: #ffff00;">frees the space appointed to p where p was originally obtained by calling malloc or calloc.</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgf473efd" class="outline-2">
<h2 id="orgf473efd">The UNIX System Interface</h2>
<div class="outline-text-2" id="text-orgf473efd">
</div>
<div id="outline-container-org2c2ddde" class="outline-3">
<h3 id="org2c2ddde">Open, Creat, Close, Unlink</h3>
<div class="outline-text-3" id="text-org2c2ddde">
<p>
Other than the default standard input, output and error, you must explicitly open files in order to read or write them (such as with I/O manipulation with external hardware).
</p>

<p>
There is a limit (often about 20) on the number of files that a program may have open simultaneously.
</p>
</div>
</div>

<div id="outline-container-org4be1eca" class="outline-3">
<h3 id="org4be1eca">Random Access - Lseek</h3>
<div class="outline-text-3" id="text-org4be1eca">
<p>
When necessary, a file can be read or written in any arbitrary order. The system call `lseek` provides a way to move around in a file without reading or writing any data:
</p>

<div class="org-src-container">
<pre class="src src-C"><span style="color: #00ff00;">long</span> <span style="color: #0000ff; font-weight: bold;">lseek</span><span style="color: #8c8c8c;">(</span><span style="color: #00ff00;">int</span> <span style="color: #ffff00;">fd</span>, <span style="color: #00ff00;">long</span> <span style="color: #ffff00;">offset</span>, <span style="color: #00ff00;">int</span> <span style="color: #ffff00;">origin</span><span style="color: #8c8c8c;">)</span>;
</pre>
</div>

<p>
`lseek` sets the position in the file whose descriptor is given. Subsequent reads and write will start at this point.
</p>
</div>
</div>

<div id="outline-container-orgfc2f1d0" class="outline-3">
<h3 id="orgfc2f1d0">Example - A Storage Allocator</h3>
<div class="outline-text-3" id="text-orgfc2f1d0">
<p>
This example creates a memory allocator that allows for non-continuous and/or segmented memory allocation as shown in Figure \ref{fig:storageexample}.
</p>

<p>
![An example of how the storage allocator will work \label{fig:storageexample}](<img src="https://learning.oreilly.com/library/view/the-c-programming/9780133086249/graphics/f0185_01.jpg" alt="f0185_01.jpg">).
</p>

<p>
`freep` is a list of pointers to the start of free areas of memory. The list contains structures of the form:
</p>

<div class="org-src-container">
<pre class="src src-C"><span style="color: #00ffff; font-weight: bold;">typedef</span> <span style="color: #00ff00;">long</span> <span style="color: #00ff00;">Align</span>;  <span style="color: #ffff00;">/* </span><span style="color: #ffff00;">for alignment to long boundary</span><span style="color: #ffff00;"> */</span>



<span style="color: #00ffff; font-weight: bold;">union</span> <span style="color: #00ff00;">header</span> <span style="color: #8c8c8c;">{</span>       <span style="color: #ffff00;">/* </span><span style="color: #ffff00;">block header:</span><span style="color: #ffff00;"> */</span>

    <span style="color: #00ffff; font-weight: bold;">struct</span> <span style="color: #93a8c6;">{</span>

        <span style="color: #00ffff; font-weight: bold;">union</span> <span style="color: #00ff00;">header</span> *<span style="color: #ffff00;">ptr</span>; <span style="color: #ffff00;">/* </span><span style="color: #ffff00;">next block if on free list</span><span style="color: #ffff00;"> */</span>

        <span style="color: #00ff00;">unsigned</span> <span style="color: #ffff00;">size</span>;     <span style="color: #ffff00;">/* </span><span style="color: #ffff00;">size of this block</span><span style="color: #ffff00;"> */</span>

    <span style="color: #93a8c6;">}</span> <span style="color: #ffff00;">s</span>;

    <span style="color: #00ff00;">Align</span> <span style="color: #ffff00;">x</span>;         <span style="color: #ffff00;">/* </span><span style="color: #ffff00;">force alignment of blocks</span><span style="color: #ffff00;"> */</span>

<span style="color: #8c8c8c;">}</span>;



<span style="color: #00ffff; font-weight: bold;">typedef</span> <span style="color: #00ffff; font-weight: bold;">union</span> <span style="color: #00ff00;">header</span> <span style="color: #00ff00;">Header</span>;
</pre>
</div>

<p>
The overridden `malloc` method has the form of:
</p>

<div class="org-src-container">
<pre class="src src-C"><span style="color: #00ffff; font-weight: bold;">static</span> <span style="color: #00ff00;">Header</span> <span style="color: #ffff00;">base</span>;       <span style="color: #ffff00;">/* </span><span style="color: #ffff00;">empty list to get started</span><span style="color: #ffff00;"> */</span>

<span style="color: #00ffff; font-weight: bold;">static</span> <span style="color: #00ff00;">Header</span> *<span style="color: #ffff00;">freep</span> = <span style="color: #ff00ff;">NULL</span>;     <span style="color: #ffff00;">/* </span><span style="color: #ffff00;">start of free list</span><span style="color: #ffff00;"> */</span>



<span style="color: #ffff00;">/* </span><span style="color: #ffff00;">malloc:  general-purpose storage allocator</span><span style="color: #ffff00;"> */</span>

<span style="color: #00ff00;">void</span> *<span style="color: #0000ff; font-weight: bold;">malloc</span><span style="color: #8c8c8c;">(</span><span style="color: #00ff00;">unsigned</span> <span style="color: #ffff00;">nbytes</span><span style="color: #8c8c8c;">)</span>

<span style="color: #8c8c8c;">{</span>

    <span style="color: #00ff00;">Header</span> *<span style="color: #ffff00;">p</span>, *<span style="color: #ffff00;">prevp</span>;

    <span style="color: #00ff00;">Header</span> *<span style="color: #0000ff; font-weight: bold;">morecore</span><span style="color: #93a8c6;">(</span><span style="color: #00ff00;">unsigned</span><span style="color: #93a8c6;">)</span>;

    <span style="color: #00ff00;">unsigned</span> <span style="color: #ffff00;">nunits</span>;



    nunits = <span style="color: #93a8c6;">(</span>nbytes+<span style="color: #00ffff; font-weight: bold;">sizeof</span><span style="color: #b0b1a3;">(</span>Header<span style="color: #b0b1a3;">)</span>&#8722;<span style="color: #ff00ff;">1</span><span style="color: #93a8c6;">)</span>/<span style="color: #00ffff; font-weight: bold;">sizeof</span><span style="color: #93a8c6;">(</span>Header<span style="color: #93a8c6;">)</span> + <span style="color: #ff00ff;">1</span>;

    <span style="color: #00ffff; font-weight: bold;">if</span> <span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span>prevp = freep<span style="color: #b0b1a3;">)</span> == <span style="color: #ff00ff;">NULL</span><span style="color: #93a8c6;">)</span> <span style="color: #93a8c6;">{</span>  <span style="color: #ffff00;">/* </span><span style="color: #ffff00;">no free list yet</span><span style="color: #ffff00;"> */</span>

        base.s.ptr = freep = prevp = &amp;base;

        base.s.size = <span style="color: #ff00ff;">0</span>;

    <span style="color: #93a8c6;">}</span>

    <span style="color: #00ffff; font-weight: bold;">for</span> <span style="color: #93a8c6;">(</span>p = prevp-&gt;s.ptr; ; prevp = p, p = p-&gt;s.ptr<span style="color: #93a8c6;">)</span> <span style="color: #93a8c6;">{</span>

        <span style="color: #00ffff; font-weight: bold;">if</span> <span style="color: #b0b1a3;">(</span>p-&gt;s.size &gt;= nunits<span style="color: #b0b1a3;">)</span> <span style="color: #b0b1a3;">{</span>    <span style="color: #ffff00;">/* </span><span style="color: #ffff00;">big enough</span><span style="color: #ffff00;"> */</span>

            <span style="color: #00ffff; font-weight: bold;">if</span> <span style="color: #8c8c8c;">(</span>p-&gt;s.size == nunits<span style="color: #8c8c8c;">)</span>     <span style="color: #ffff00;">/* </span><span style="color: #ffff00;">exactly</span><span style="color: #ffff00;"> */</span>

                prevp-&gt;s.ptr = p-&gt;s.ptr;

            <span style="color: #00ffff; font-weight: bold;">else</span> <span style="color: #8c8c8c;">{</span>             <span style="color: #ffff00;">/* </span><span style="color: #ffff00;">allocate tail end</span><span style="color: #ffff00;"> */</span>

                p-&gt;s.size -= nunits;

                p += p-&gt;s.size;

                p-&gt;s.size = nunits;

            <span style="color: #8c8c8c;">}</span>

            freep = prevp;

            <span style="color: #00ffff; font-weight: bold;">return</span> <span style="color: #8c8c8c;">(</span><span style="color: #00ff00;">void</span> *<span style="color: #8c8c8c;">)(</span>p+<span style="color: #ff00ff;">1</span><span style="color: #8c8c8c;">)</span>;

        <span style="color: #b0b1a3;">}</span>

        <span style="color: #00ffff; font-weight: bold;">if</span> <span style="color: #b0b1a3;">(</span>p == freep<span style="color: #b0b1a3;">)</span>  <span style="color: #ffff00;">/* </span><span style="color: #ffff00;">wrapped around free list</span><span style="color: #ffff00;"> */</span>

            <span style="color: #00ffff; font-weight: bold;">if</span> <span style="color: #b0b1a3;">(</span><span style="color: #8c8c8c;">(</span>p = morecore<span style="color: #93a8c6;">(</span>nunits<span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span> == <span style="color: #ff00ff;">NULL</span><span style="color: #b0b1a3;">)</span>

                <span style="color: #00ffff; font-weight: bold;">return</span> <span style="color: #ff00ff;">NULL</span>;   <span style="color: #ffff00;">/* </span><span style="color: #ffff00;">none left</span><span style="color: #ffff00;"> */</span>

    <span style="color: #93a8c6;">}</span>

<span style="color: #8c8c8c;">}</span>
</pre>
</div>

<p>
Where `morecore` is used to obtain more storage from the operating system.
</p>

<div class="org-src-container">
<pre class="src src-C"><span style="color: #0000ff; font-weight: bold;">#define</span>    <span style="color: #ffff00;">NALLOC</span>    <span style="color: #ff00ff;">1024</span>    <span style="color: #ffff00;">/* </span><span style="color: #ffff00;">minimum #units to request</span><span style="color: #ffff00;"> */</span>



<span style="color: #ffff00;">/* </span><span style="color: #ffff00;">morecore:  ask system for more memory</span><span style="color: #ffff00;"> */</span>

<span style="color: #00ffff; font-weight: bold;">static</span> <span style="color: #00ff00;">Header</span> *<span style="color: #0000ff; font-weight: bold;">morecore</span><span style="color: #8c8c8c;">(</span><span style="color: #00ff00;">unsigned</span> <span style="color: #ffff00;">nu</span><span style="color: #8c8c8c;">)</span>

<span style="color: #8c8c8c;">{</span>

    <span style="color: #00ff00;">char</span> *<span style="color: #ffff00;">cp</span>, *<span style="color: #0000ff; font-weight: bold;">sbrk</span><span style="color: #93a8c6;">(</span><span style="color: #00ff00;">int</span><span style="color: #93a8c6;">)</span>;

    <span style="color: #00ff00;">Header</span> *<span style="color: #ffff00;">up</span>;



    <span style="color: #00ffff; font-weight: bold;">if</span> <span style="color: #93a8c6;">(</span>nu &lt; <span style="color: #ff00ff;">NALLOC</span><span style="color: #93a8c6;">)</span>

        nu = <span style="color: #ff00ff;">NALLOC</span>;

    cp = sbrk<span style="color: #93a8c6;">(</span>nu * <span style="color: #00ffff; font-weight: bold;">sizeof</span><span style="color: #b0b1a3;">(</span>Header<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>;

    <span style="color: #00ffff; font-weight: bold;">if</span> <span style="color: #93a8c6;">(</span>cp == <span style="color: #b0b1a3;">(</span><span style="color: #00ff00;">char</span> *<span style="color: #b0b1a3;">)</span> &#8722;<span style="color: #ff00ff;">1</span><span style="color: #93a8c6;">)</span>    <span style="color: #ffff00;">/* </span><span style="color: #ffff00;">no space at all</span><span style="color: #ffff00;"> */</span>

        <span style="color: #00ffff; font-weight: bold;">return</span> <span style="color: #ff00ff;">NULL</span>;

    up = <span style="color: #93a8c6;">(</span><span style="color: #00ff00;">Header</span> *<span style="color: #93a8c6;">)</span> cp;

    up-&gt;s.size = nu;

    free<span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span><span style="color: #00ff00;">void</span> *<span style="color: #b0b1a3;">)(</span>up+<span style="color: #ff00ff;">1</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>;

    <span style="color: #00ffff; font-weight: bold;">return</span> freep;

<span style="color: #8c8c8c;">}</span>
</pre>
</div>

<p>
`free` is the last thing. It scans the free list looking for the place to insert the free block. This is either between two existing blocks or at one end of the list. In any case, if th block being freed is adjacent to either neighbor, the adjacent blocks are combined.
</p>

<div class="org-src-container">
<pre class="src src-C"><span style="color: #ffff00;">/* </span><span style="color: #ffff00;">free:  put block ap in free list</span><span style="color: #ffff00;"> */</span>

<span style="color: #00ff00;">void</span> <span style="color: #0000ff; font-weight: bold;">free</span><span style="color: #8c8c8c;">(</span><span style="color: #00ff00;">void</span> *<span style="color: #ffff00;">ap</span><span style="color: #8c8c8c;">)</span>

<span style="color: #8c8c8c;">{</span>

    <span style="color: #00ff00;">Header</span> *<span style="color: #ffff00;">bp</span>, *<span style="color: #ffff00;">p</span>;



    bp = <span style="color: #93a8c6;">(</span><span style="color: #00ff00;">Header</span> *<span style="color: #93a8c6;">)</span>ap - <span style="color: #ff00ff;">1</span>;    <span style="color: #ffff00;">/* </span><span style="color: #ffff00;">point to block header</span><span style="color: #ffff00;"> */</span>

    <span style="color: #00ffff; font-weight: bold;">for</span> <span style="color: #93a8c6;">(</span>p = freep; !<span style="color: #b0b1a3;">(</span>bp &gt; p &amp;&amp; bp &lt; p-&gt;s.ptr<span style="color: #b0b1a3;">)</span>; p = p-&gt;s.ptr<span style="color: #93a8c6;">)</span>

        <span style="color: #00ffff; font-weight: bold;">if</span> <span style="color: #93a8c6;">(</span>p &gt;= p-&gt;s.ptr &amp;&amp; <span style="color: #b0b1a3;">(</span>bp &gt; p &#166;&#166; bp &lt; p-&gt;s.ptr<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>

            <span style="color: #00ffff; font-weight: bold;">break</span>;  <span style="color: #ffff00;">/* </span><span style="color: #ffff00;">freed block at start or end of arena</span><span style="color: #ffff00;"> */</span>



    <span style="color: #00ffff; font-weight: bold;">if</span> <span style="color: #93a8c6;">(</span>bp + bp-&gt;s.size == p-&gt;s.ptr<span style="color: #93a8c6;">)</span> <span style="color: #93a8c6;">{</span> <span style="color: #ffff00;">/* </span><span style="color: #ffff00;">join to upper nbr</span><span style="color: #ffff00;"> */</span>

        bp-&gt;s.size += p-&gt;s.ptr-&gt;s.size;

        bp-&gt;s.ptr = p-&gt;s.ptr-&gt;s.ptr;

    <span style="color: #93a8c6;">}</span> <span style="color: #00ffff; font-weight: bold;">else</span>

        bp-&gt;s.ptr = p-&gt;s.ptr;

    <span style="color: #00ffff; font-weight: bold;">if</span> <span style="color: #93a8c6;">(</span>p + p-&gt;s.size == bp<span style="color: #93a8c6;">)</span> <span style="color: #93a8c6;">{</span>         <span style="color: #ffff00;">/* </span><span style="color: #ffff00;">join to lower nbr</span><span style="color: #ffff00;"> */</span>

        p-&gt;s.size += bp-&gt;s.size;

        p-&gt;s.ptr = bp-&gt;s.ptr;

    <span style="color: #93a8c6;">}</span> <span style="color: #00ffff; font-weight: bold;">else</span>

        p-&gt;s.ptr = bp;

    freep = p;

<span style="color: #8c8c8c;">}</span>
</pre>
</div>
</div>
</div>
</div>
<div class="taglist"></div>]]></description>
  <link>https://alexb7711.github.io/2020-04-30-The-C-Programming-Language-Notes.html</link>
  <pubDate>Mon, 17 May 2021 13:43:00 -0600</pubDate>
</item>
<item>
  <title><![CDATA[Using =stow= To Manage Your Dotfiles]]></title>
  <description><![CDATA[
<nav id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org29214e4">What is <code>stow</code>?</a>
<ul>
<li><a href="#org6346718">Example 1</a></li>
<li><a href="#org269ff87">Example 2</a></li>
</ul>
</li>
<li><a href="#org588c883">My <code>stow</code> Workflow</a></li>
</ul>
</div>
</nav>
<p>
A few weeks ago I made a post about keeping track of your dotfiles using <code>rsync</code>. While not a horrible way to do it, there is a <b><b>way</b></b> better way of handling it using <code>stow</code>. I first heard about it here on [Wolfgang&rsquo;s Channel](<a href="https://www.youtube.com/watch?v=MJBVA4LeJKA">https://www.youtube.com/watch?v=MJBVA4LeJKA</a>). It took me a second to get a real grasp for it, but it is pretty straight forward.
</p>

<p>
This post is going to talk about what stow is and how I currently use it.
</p>

<div id="outline-container-org29214e4" class="outline-2">
<h2 id="org29214e4">What is <code>stow</code>?</h2>
<div class="outline-text-2" id="text-org29214e4">
<p>
Pulling this quote directly from the <a href="https://www.youtube.com/watch?v=MJBVA4LeJKA">GNU page</a>:
</p>

<blockquote>
<p>
GNU Stow is a symlink farm manager which takes distinct packages of software and/or data located in separate directories on the filesystem, and makes them appear to be installed in the same place. For example, /usr/local/bin could contain symlinks to files within /usr/local/stow/emacs/bin, /usr/local/stow/perl/bin etc., and likewise recursively for any other subdirectories such as &#x2026;/share, &#x2026;/man, and so on.
</p>

<p>
This is particularly useful for keeping track of system-wide and per-user installations of software built from source, but can also facilitate a more controlled approach to management of configuration files in the user&rsquo;s home directory, especially when coupled with version control systems.
</p>

<p>
Stow is implemented as a combination of a Perl script providing a CLI interface, and a backend Perl module which does most of the work. Stow is Free Software, licensed under the GNU General Public License.
</p>

<p>
In other words, it symlinks the desired file based of a starting directory and the path dictated by the file tree created for the file. If that doesn&rsquo;t make sense, don&rsquo;t worry. Take a look at the following examples and it will make more sense.
</p>
</blockquote>
</div>

<div id="outline-container-org6346718" class="outline-3">
<h3 id="org6346718">Example 1</h3>
<div class="outline-text-3" id="text-org6346718">
<p>
You have a vimrc file in <code>~/.vimrc</code>. You want to symlink that. So you have a git repository that you cloned in <code>~/Code/dotfiles</code>. If you want to keep track of your vimrc file, what you do is first do is create a directory called vim (or whatever else you want to call it) in your dotfiles directory. After doing so, move your vimrc into the vim directory you just created. Now, if you type <code>stow ~/ vim</code> while you are in the dotfiles directory you will symlink you vimrc to <code>~/.vimrc</code>.
</p>

<p>
The <code>-t</code> flag sets that starting location for where you want the symlink to propagate from. So from the point of view from <code>stow</code> you are looking in the directory <code>vim</code> that has the path <code>.vimrc</code>. Since you are starting from <code>~/</code> you will symlink the <code>.vimrc</code> file to <code>~/.vimrc</code>.
</p>
</div>
</div>

<div id="outline-container-org269ff87" class="outline-3">
<h3 id="org269ff87">Example 2</h3>
<div class="outline-text-3" id="text-org269ff87">
<p>
You have a config file <code>~/.config/nvim/init.vim</code> that you want to keep track of. Following the steps from the previous example, you create a directory called <code>nvim</code> in your dotfiles and create a file structure <code>nvim/.config/nvim/</code>. Copy the init.vim file so you have the structure <code>nvim/.config/nvim/init.vim'. To symlink this file you type =stow -t ~/ nvim</code>.
</p>

<p>
Again, from the point of view of <code>stow</code>, you are linking the path <code>.config/nvim/init.vim</code> starting at <code>~/</code> creating the link <code>~/.config/nvim/init.vim</code>.
</p>
</div>
</div>
</div>

<div id="outline-container-org588c883" class="outline-2">
<h2 id="org588c883">My <code>stow</code> Workflow</h2>
<div class="outline-text-2" id="text-org588c883">
<p>
As a TL;DR, my workflow is essentially what I described above. The only difference is that I have a script that has all the name of the directories appended to the stow command. The only difference is that I also keep track of my packages in a different script by running <code>pacman -Qqe &gt; PackageList.txt</code> which creates a list of all the packages you installed in such a way that you can use it as an input to pacman later on. So at the end of the day, you have a little scrip that looks like the following:
</p>

<p>
<code>setConfig.sh</code>
</p>
<div class="org-src-container">
<pre class="src src-shell"><span style="color: #ffff00;">#</span><span style="color: #ffff00;">!/bin/</span><span style="color: #00ffff; font-weight: bold;">sh</span>

stow -t ~/ aliasrc dunst <span style="color: #00ff00;">git</span> Xmodmap zshenv compton env nvim shortcutrc zsh xinitrc rofi mbsync notmuch mutt password-store gnupg ncspot vifm
</pre>
</div>

<p>
<code>updatePackages.sh</code>
</p>
<div class="org-src-container">
<pre class="src src-shell">pacman -Qqe &gt; PackageList.txt
</pre>
</div>
</div>
</div>
<div class="taglist"></div>]]></description>
  <link>https://alexb7711.github.io/2020-04-08-Using-stow-To-Manage-Your-Dotfiles.html</link>
  <pubDate>Mon, 17 May 2021 13:43:00 -0600</pubDate>
</item>
<item>
  <title><![CDATA[Markdown Live Preview Without Vim Pluggins]]></title>
  <description><![CDATA[
<nav id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org9c0c113">Introduction</a></li>
<li><a href="#org13a34bb">pandoc</a></li>
<li><a href="#orgae038e6">Compile Script</a></li>
<li><a href="#org4a8433c">Tying this all together with Vim</a></li>
</ul>
</div>
</nav>

<div id="outline-container-org9c0c113" class="outline-2">
<h2 id="org9c0c113">Introduction</h2>
<div class="outline-text-2" id="text-org9c0c113">
<p>
Markdown is an extremely quick and convenient way to jot down notes, draft up a quick styled paper, or even with the yaml metada block for pandoc markdown write a full paper. During college I went through a few markdown applications that auto-generated the markdown on the fly, managed your notes into a tree structure for you, or had auto complete commands. I even tried using Vim for a while, but gave up on it for a while. Recently I have rekindled my affinity for Vim because of work and decided to give note taking through Vim another shot. Needless to say that it went well because this post exists.
</p>

<p>
If you don&rsquo;t know the basics of Markdown, you can refer to <a href="https://www.markdownguide.org/getting-started">this link</a>. Other than that, the configuration I will show you in this post utilizes: Linux, pandoc, Vim, and Zathura (or whatever other pdf tool you would like to use). Using these tools we will create a quick and easy way to compile your markdown files (which can also be extended to any file type), and view our formatted pdf document generated by our markdown file on the fly!
</p>
</div>
</div>

<div id="outline-container-org13a34bb" class="outline-2">
<h2 id="org13a34bb">pandoc</h2>
<div class="outline-text-2" id="text-org13a34bb">
<p>
Very simply pandoc is a file converter. You can convert LaTeX files into html files, pdf files, or whatever other file type pandoc supports. This is a similar case to markdown. A typical conversion from markdown to pdf using pandoc would be:
</p>

<div class="org-src-container">
<pre class="src src-shell">pandoc markdown.md -o pdf.pdf
</pre>
</div>

<p>
Which takes a markdown file called &ldquo;markdown&rdquo; and creates a pdf file called &ldquo;pdf&rdquo;.
</p>
</div>
</div>

<div id="outline-container-orgae038e6" class="outline-2">
<h2 id="orgae038e6">Compile Script</h2>
<div class="outline-text-2" id="text-orgae038e6">
<p>
This is the glue that will make the compiling a breeze. Create a document called &ldquo;compile&rdquo; and insert the following code:
</p>

<div class="org-src-container">
<pre class="src src-shell"><span style="color: #ffff00;">#</span><span style="color: #ffff00;">!/bin/</span><span style="color: #00ffff; font-weight: bold;">sh</span>

<span style="color: #ffff00;">file</span>=$<span style="color: #8c8c8c;">(</span>readlink -f <span style="color: #00ff00;">"</span><span style="color: #ff00ff;">$</span><span style="color: #ffff00;">1</span><span style="color: #00ff00;">"</span><span style="color: #8c8c8c;">)</span>
<span style="color: #ffff00;">dir</span>=$<span style="color: #8c8c8c;">(</span>dirname <span style="color: #00ff00;">"</span><span style="color: #ff00ff;">$</span><span style="color: #ffff00;">file</span><span style="color: #00ff00;">"</span><span style="color: #8c8c8c;">)</span>
<span style="color: #ffff00;">base</span>=<span style="color: #00ff00;">"</span><span style="color: #ff00ff;">$</span><span style="color: #ffff00;">{file%.*}</span><span style="color: #00ff00;">"</span>
<span style="color: #ffff00;">shebang</span>=$<span style="color: #8c8c8c;">(</span>sed -n 1p <span style="color: #00ff00;">"</span><span style="color: #ff00ff;">$</span><span style="color: #ffff00;">file</span><span style="color: #00ff00;">"</span><span style="color: #8c8c8c;">)</span>

<span style="color: #00ff00;">cd</span> <span style="color: #00ff00;">"</span><span style="color: #ff00ff;">$</span><span style="color: #ffff00;">dir</span><span style="color: #00ff00;">"</span> || <span style="color: #00ffff; font-weight: bold;">exit</span>

<span style="color: #00ffff; font-weight: bold;">case</span> <span style="color: #00ff00;">"</span><span style="color: #ff00ff;">$</span><span style="color: #ffff00;">file</span><span style="color: #00ff00;">"</span><span style="color: #00ffff; font-weight: bold;"> in</span>
    *.md) pandoc <span style="color: #00ff00;">"</span><span style="color: #ff00ff;">$</span><span style="color: #ffff00;">file</span><span style="color: #00ff00;">"</span> -o <span style="color: #00ff00;">"</span><span style="color: #ff00ff;">$</span><span style="color: #ffff00;">base</span><span style="color: #00ff00;">"</span>.pdf;;
<span style="color: #00ffff; font-weight: bold;">esac</span>
</pre>
</div>

<p>
All this script does is when it is passed a file it will run a certain command based on the file extension. In this case it runs a pandoc command similar to the one shown above.
</p>
</div>
</div>

<div id="outline-container-org4a8433c" class="outline-2">
<h2 id="org4a8433c">Tying this all together with Vim</h2>
<div class="outline-text-2" id="text-org4a8433c">
<p>
Now we want a quick and easy way to run this command and pass the file we are editing from Vim. Fortunately, this is easy enough! Copy the following command into your .vimrc:
</p>

<div class="org-src-container">
<pre class="src src-vim">nnoremap &lt;leader&gt;c :silent execute '!~/[path]/[to]/[script]/compile %:p' &lt;bar&gt; :redraw! &lt;Enter&gt;
</pre>
</div>

<p>
This command remaps &ldquo;\\+c&rdquo; to run the compile script and then pop you right back into Vim. To be able to view your pdf change as you compile it, you can open the pdf with zathura, or whatever is your favorite pdf viewer.
</p>
</div>
</div>
<div class="taglist"></div>]]></description>
  <link>https://alexb7711.github.io/2020-02-10-Markdown-Live-Preview-Without-Vim-Pluggins.html</link>
  <pubDate>Mon, 17 May 2021 13:43:00 -0600</pubDate>
</item>
</channel>
</rss>
